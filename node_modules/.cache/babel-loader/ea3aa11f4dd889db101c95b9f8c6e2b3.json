{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Acer\\\\Desktop\\\\Work\\\\garaaz-distributor\\\\src\\\\components\\\\EmployeeList\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useMemo } from 'react';\nimport { Button, Box, Center, Image, MenuButton, Menu, MenuList, MenuItem, useDisclosure } from '@chakra-ui/react';\nimport toast from 'react-hot-toast';\nimport { useHistory } from 'react-router';\nimport nodataIllustrator from \"../../assets/img/NoData.svg\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setEmployeeList, getEmployees } from './actions';\nimport messages from './messages';\nimport serverErrorIllustrator from \"../../assets/img/serverError.svg\";\nimport Error from '../Error';\nimport { useIntl } from 'react-intl';\nimport './style.css';\nimport { optionsProp } from './constants';\nimport EmployeeTable from './EmployeeTable';\nimport AdditionOption from '../../utils/AdditionOptions';\nimport { Loading } from '../Loading';\nimport DynamicTable from '../DynamicTable';\nimport { FiMoreVertical } from 'react-icons/fi';\nimport EditEmployee from './EditEmployee';\nimport { selectGlobalState } from '../../globalSlice';\nimport { Link } from 'react-router-dom'; // import EmployeeAddition from '../EmployeeAddition/index';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst EmployeeList = () => {\n  _s();\n\n  const [serverError, setServerError] = useState(false);\n  const intl = useIntl();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const auth = useSelector(state => state.auth);\n  const employees = useSelector(state => state.employeeList.employees);\n  const [openBulk, setOpenBulk] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [selectedEmployee, setSelectedEmployee] = useState({});\n  const {\n    isOpen,\n    onOpen,\n    onClose\n  } = useDisclosure();\n  const [reFetchEmployee, setRefetchEmployee] = useState(false);\n  const {\n    isDistributor\n  } = useSelector(selectGlobalState);\n\n  const getEmployeeList = async () => {\n    try {\n      setLoading(true);\n      const {\n        data\n      } = await getEmployees(auth);\n      dispatch(setEmployeeList(data));\n      setLoading(false);\n      setRefetchEmployee(true);\n    } catch (error) {\n      setLoading(false);\n      setServerError(true);\n      toast('Something went wrong!');\n    }\n  };\n\n  useEffect(() => {\n    let componentMounted = true;\n    getEmployeeList();\n    return componentMounted = false;\n  }, []);\n  const columns = useMemo(() => [{\n    Header: 'S. No',\n    accessor: 'sno',\n    Cell: allData => {\n      var _allData$row;\n\n      return /*#__PURE__*/_jsxDEV(Box, {\n        children: (allData === null || allData === void 0 ? void 0 : (_allData$row = allData.row) === null || _allData$row === void 0 ? void 0 : _allData$row.index) + 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 18\n      }, this);\n    }\n  }, {\n    Header: 'Status',\n    accessor: 'accountStatus'\n  }, {\n    Header: 'Employee Name',\n    accessor: 'userProfile',\n    Cell: _ref => {\n      var _value$, _value$2;\n\n      let {\n        value\n      } = _ref;\n      return /*#__PURE__*/_jsxDEV(Box, {\n        children: `${(_value$ = value[0]) === null || _value$ === void 0 ? void 0 : _value$.firstName} ${(_value$2 = value[0]) === null || _value$2 === void 0 ? void 0 : _value$2.lastName}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this);\n    }\n  }, {\n    Header: 'Mobile Number',\n    accessor: row => {\n      var _row$userProfile$;\n\n      return row === null || row === void 0 ? void 0 : (_row$userProfile$ = row.userProfile[0]) === null || _row$userProfile$ === void 0 ? void 0 : _row$userProfile$.mobileNumber;\n    }\n  }, {\n    Header: 'Branch Code',\n    accessor: row => {\n      var _row$branch$;\n\n      return (_row$branch$ = row.branch[0]) === null || _row$branch$ === void 0 ? void 0 : _row$branch$.branchCode;\n    }\n  }, {\n    Header: 'Branch Name',\n    accessor: row => {\n      var _row$branch$2;\n\n      return (_row$branch$2 = row.branch[0]) === null || _row$branch$2 === void 0 ? void 0 : _row$branch$2.branchName;\n    }\n  }, {\n    Header: 'Actions',\n    accessor: row => row,\n    Cell: _ref2 => {\n      let {\n        value\n      } = _ref2;\n\n      const handleEdit = () => {\n        setSelectedEmployee(value);\n        onOpen();\n      };\n\n      return /*#__PURE__*/_jsxDEV(Menu, {\n        children: [/*#__PURE__*/_jsxDEV(MenuButton, {\n          p: 0,\n          as: Button,\n          children: /*#__PURE__*/_jsxDEV(Center, {\n            children: /*#__PURE__*/_jsxDEV(FiMoreVertical, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(MenuList, {\n          children: /*#__PURE__*/_jsxDEV(MenuItem, {\n            onClick: handleEdit,\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }, this);\n    }\n  }], []);\n  const employeeCol = useMemo(() => [{\n    Header: 'S. No',\n    accessor: 'sno',\n    Cell: allData => {\n      var _allData$row2;\n\n      return /*#__PURE__*/_jsxDEV(Box, {\n        children: (allData === null || allData === void 0 ? void 0 : (_allData$row2 = allData.row) === null || _allData$row2 === void 0 ? void 0 : _allData$row2.index) + 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 18\n      }, this);\n    }\n  }, {\n    Header: 'Status',\n    accessor: 'accountStatus'\n  }, {\n    Header: 'Employee Name',\n    accessor: 'userProfile',\n    Cell: _ref3 => {\n      var _value$3, _value$4;\n\n      let {\n        value\n      } = _ref3;\n      return /*#__PURE__*/_jsxDEV(Box, {\n        children: `${(_value$3 = value[0]) === null || _value$3 === void 0 ? void 0 : _value$3.firstName} ${(_value$4 = value[0]) === null || _value$4 === void 0 ? void 0 : _value$4.lastName}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 11\n      }, this);\n    }\n  }, {\n    Header: 'Mobile Number',\n    accessor: row => {\n      var _row$userProfile$2;\n\n      return row === null || row === void 0 ? void 0 : (_row$userProfile$2 = row.userProfile[0]) === null || _row$userProfile$2 === void 0 ? void 0 : _row$userProfile$2.mobileNumber;\n    }\n  }, {\n    Header: 'Branch Code',\n    accessor: row => {\n      var _row$branch$3;\n\n      return (_row$branch$3 = row.branch[0]) === null || _row$branch$3 === void 0 ? void 0 : _row$branch$3.branchCode;\n    }\n  }, {\n    Header: 'Branch Name',\n    accessor: row => {\n      var _row$branch$4;\n\n      return (_row$branch$4 = row.branch[0]) === null || _row$branch$4 === void 0 ? void 0 : _row$branch$4.branchName;\n    }\n  }], []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-0 p-1 pb-0 \",\n      children: [employees.length > 0 && isDistributor && /*#__PURE__*/_jsxDEV(Box, {\n        textAlign: \"right\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/employee/add\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"addition\",\n            size: \"md\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-user-plus mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 17\n            }, this), intl.formatMessage(messages.addEmployee)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }, this), !navigator.onLine ? /*#__PURE__*/_jsxDEV(Error, {\n        onRetry: getEmployeeList,\n        title: intl.formatMessage(messages.networkErrorTitle),\n        message: intl.formatMessage(messages.networkErrorMessage),\n        illustrator: serverErrorIllustrator\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 11\n      }, this) : serverError ? /*#__PURE__*/_jsxDEV(Error, {\n        onRetry: getEmployeeList,\n        title: intl.formatMessage(messages.serverErrorTitle),\n        message: intl.formatMessage(messages.serverErrorMessage),\n        illustrator: serverErrorIllustrator\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 11\n      }, this) : loading && !reFetchEmployee ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }, this) : employees.length > 0 ? /*#__PURE__*/_jsxDEV(Box, {\n        mt: 6,\n        children: /*#__PURE__*/_jsxDEV(DynamicTable, {\n          columns: isDistributor ? columns : employeeCol,\n          data: employees,\n          fetchData: () => console.log('...fetching'),\n          skipPageReset: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 11\n      }, this) : isDistributor ? /*#__PURE__*/_jsxDEV(AdditionOption, { ...optionsProp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Center, {\n        h: \"80vh\",\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          textStyle: \"normalBold\",\n          children: \"No Data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(EditEmployee, {\n      isOpen: isOpen,\n      employees: employees,\n      selectedEmployee: selectedEmployee,\n      onClose: onClose,\n      fetchEmployees: getEmployeeList\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 168,\n    columnNumber: 5\n  }, this);\n};\n\n_s(EmployeeList, \"AfJMd2qlzRVqE5yQUM6FYkXWHEk=\", false, function () {\n  return [useIntl, useDispatch, useHistory, useSelector, useSelector, useDisclosure, useSelector];\n});\n\n_c = EmployeeList;\nexport default EmployeeList;\n\nvar _c;\n\n$RefreshReg$(_c, \"EmployeeList\");","map":{"version":3,"sources":["C:/Users/Acer/Desktop/Work/garaaz-distributor/src/components/EmployeeList/index.js"],"names":["React","useEffect","useState","useMemo","Button","Box","Center","Image","MenuButton","Menu","MenuList","MenuItem","useDisclosure","toast","useHistory","useDispatch","useSelector","setEmployeeList","getEmployees","messages","Error","useIntl","optionsProp","EmployeeTable","AdditionOption","Loading","DynamicTable","FiMoreVertical","EditEmployee","selectGlobalState","Link","EmployeeList","serverError","setServerError","intl","dispatch","history","auth","state","employees","employeeList","openBulk","setOpenBulk","loading","setLoading","selectedEmployee","setSelectedEmployee","isOpen","onOpen","onClose","reFetchEmployee","setRefetchEmployee","isDistributor","getEmployeeList","data","error","componentMounted","columns","Header","accessor","Cell","allData","row","index","value","firstName","lastName","userProfile","mobileNumber","branch","branchCode","branchName","handleEdit","employeeCol","length","formatMessage","addEmployee","navigator","onLine","networkErrorTitle","networkErrorMessage","serverErrorIllustrator","serverErrorTitle","serverErrorMessage","console","log"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useMemo } from 'react';\r\nimport {\r\n  Button,\r\n  Box,\r\n  Center,\r\n  Image,\r\n  MenuButton,\r\n  Menu,\r\n  MenuList,\r\n  MenuItem,\r\n  useDisclosure,\r\n} from '@chakra-ui/react';\r\nimport toast from 'react-hot-toast';\r\nimport { useHistory } from 'react-router';\r\nimport nodataIllustrator from '../../assets/img/NoData.svg';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { setEmployeeList, getEmployees } from './actions';\r\nimport messages from './messages';\r\nimport serverErrorIllustrator from '../../assets/img/serverError.svg';\r\nimport Error from '../Error';\r\nimport { useIntl } from 'react-intl';\r\nimport './style.css';\r\nimport { optionsProp } from './constants';\r\nimport EmployeeTable from './EmployeeTable';\r\nimport AdditionOption from '../../utils/AdditionOptions';\r\nimport { Loading } from '../Loading';\r\nimport DynamicTable from '../DynamicTable';\r\nimport { FiMoreVertical } from 'react-icons/fi';\r\nimport EditEmployee from './EditEmployee';\r\nimport { selectGlobalState } from '../../globalSlice';\r\n\r\nimport { Link } from 'react-router-dom';\r\n// import EmployeeAddition from '../EmployeeAddition/index';\r\nconst EmployeeList = () => {\r\n  const [serverError, setServerError] = useState(false);\r\n  const intl = useIntl();\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const auth = useSelector((state) => state.auth);\r\n  const employees = useSelector((state) => state.employeeList.employees);\r\n  const [openBulk, setOpenBulk] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [selectedEmployee, setSelectedEmployee] = useState({});\r\n  const { isOpen, onOpen, onClose } = useDisclosure();\r\n  const [reFetchEmployee, setRefetchEmployee] = useState(false);\r\n  const { isDistributor } = useSelector(selectGlobalState);\r\n\r\n  const getEmployeeList = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const { data } = await getEmployees(auth);\r\n      dispatch(setEmployeeList(data));\r\n      setLoading(false);\r\n      setRefetchEmployee(true);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setServerError(true);\r\n      toast('Something went wrong!');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    let componentMounted = true;\r\n    getEmployeeList();\r\n    return (componentMounted = false);\r\n  }, []);\r\n\r\n  const columns = useMemo(\r\n    () => [\r\n      {\r\n        Header: 'S. No',\r\n        accessor: 'sno',\r\n        Cell: (allData) => {\r\n          return <Box>{allData?.row?.index + 1}</Box>;\r\n        },\r\n      },\r\n      {\r\n        Header: 'Status',\r\n        accessor: 'accountStatus',\r\n      },\r\n\r\n      {\r\n        Header: 'Employee Name',\r\n        accessor: 'userProfile',\r\n        Cell: ({ value }) => (\r\n          <Box>{`${value[0]?.firstName} ${value[0]?.lastName}`}</Box>\r\n        ),\r\n      },\r\n      {\r\n        Header: 'Mobile Number',\r\n        accessor: (row) => row?.userProfile[0]?.mobileNumber,\r\n      },\r\n      {\r\n        Header: 'Branch Code',\r\n        accessor: (row) => row.branch[0]?.branchCode,\r\n      },\r\n      {\r\n        Header: 'Branch Name',\r\n        accessor: (row) => row.branch[0]?.branchName,\r\n      },\r\n\r\n      {\r\n        Header: 'Actions',\r\n        accessor: (row) => row,\r\n        Cell: ({ value }) => {\r\n          const handleEdit = () => {\r\n            setSelectedEmployee(value);\r\n            onOpen();\r\n          };\r\n\r\n          return (\r\n            <Menu>\r\n              <MenuButton p={0} as={Button}>\r\n                <Center>\r\n                  <FiMoreVertical />\r\n                </Center>\r\n              </MenuButton>\r\n\r\n              <MenuList>\r\n                <MenuItem onClick={handleEdit}>Edit</MenuItem>\r\n              </MenuList>\r\n            </Menu>\r\n          );\r\n        },\r\n      },\r\n    ],\r\n    [],\r\n  );\r\n\r\n  const employeeCol = useMemo(\r\n    () => [\r\n      {\r\n        Header: 'S. No',\r\n        accessor: 'sno',\r\n        Cell: (allData) => {\r\n          return <Box>{allData?.row?.index + 1}</Box>;\r\n        },\r\n      },\r\n      {\r\n        Header: 'Status',\r\n        accessor: 'accountStatus',\r\n      },\r\n\r\n      {\r\n        Header: 'Employee Name',\r\n        accessor: 'userProfile',\r\n        Cell: ({ value }) => (\r\n          <Box>{`${value[0]?.firstName} ${value[0]?.lastName}`}</Box>\r\n        ),\r\n      },\r\n      {\r\n        Header: 'Mobile Number',\r\n        accessor: (row) => row?.userProfile[0]?.mobileNumber,\r\n      },\r\n      {\r\n        Header: 'Branch Code',\r\n        accessor: (row) => row.branch[0]?.branchCode,\r\n      },\r\n      {\r\n        Header: 'Branch Name',\r\n        accessor: (row) => row.branch[0]?.branchName,\r\n      },\r\n    ],\r\n    [],\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <div className='mb-0 p-1 pb-0 '>\r\n        {employees.length > 0 && isDistributor && (\r\n          <Box textAlign='right'>\r\n            <Link to='/employee/add'>\r\n              <Button variant='addition' size='md'>\r\n                <i className='fas fa-user-plus mr-2'></i>\r\n                {intl.formatMessage(messages.addEmployee)}\r\n              </Button>\r\n            </Link>\r\n          </Box>\r\n        )}\r\n        {!navigator.onLine ? (\r\n          <Error\r\n            onRetry={getEmployeeList}\r\n            title={intl.formatMessage(messages.networkErrorTitle)}\r\n            message={intl.formatMessage(messages.networkErrorMessage)}\r\n            illustrator={serverErrorIllustrator}\r\n          />\r\n        ) : serverError ? (\r\n          <Error\r\n            onRetry={getEmployeeList}\r\n            title={intl.formatMessage(messages.serverErrorTitle)}\r\n            message={intl.formatMessage(messages.serverErrorMessage)}\r\n            illustrator={serverErrorIllustrator}\r\n          />\r\n        ) : loading && !reFetchEmployee ? (\r\n          <Loading />\r\n        ) : employees.length > 0 ? (\r\n          <Box mt={6}>\r\n            <DynamicTable\r\n              columns={isDistributor ? columns : employeeCol}\r\n              data={employees}\r\n              fetchData={() => console.log('...fetching')}\r\n              skipPageReset={true}\r\n            />\r\n          </Box>\r\n        ) : isDistributor ? (\r\n          <AdditionOption {...optionsProp} />\r\n        ) : (\r\n          <Center h='80vh'>\r\n            <Box textStyle='normalBold'>No Data</Box>\r\n          </Center>\r\n        )}\r\n      </div>\r\n      <EditEmployee\r\n        isOpen={isOpen}\r\n        employees={employees}\r\n        selectedEmployee={selectedEmployee}\r\n        onClose={onClose}\r\n        fetchEmployees={getEmployeeList}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\n\r\nexport default EmployeeList;\r\n"]},"metadata":{},"sourceType":"module"}