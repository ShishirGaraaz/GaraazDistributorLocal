{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Acer\\\\Desktop\\\\Work\\\\garaaz-distributor\\\\src\\\\contexts\\\\VisitContext.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useContext, createContext, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport get from 'lodash/get';\nimport { publicAxios as axios } from '../axios';\nimport { useToast } from '@chakra-ui/toast';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VisitContext = /*#__PURE__*/createContext('');\nexport const VisitProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const toast = useToast();\n  const [visitId, setVisitId] = useState('');\n  useEffect(() => {\n    if (sessionStorage.getItem('visitId') === null) {\n      const postVisitCreate = async () => {\n        try {\n          const res = await axios.post('/visits', {\n            source: 'WEB'\n          });\n          sessionStorage.setItem('visitId', get(res, 'data.visitId', ''));\n          setVisitId(get(res, 'data.visitId', ''));\n        } catch (err) {\n          toast({\n            description: 'Error occured, please try again',\n            status: 'error',\n            duration: 9000,\n            isClosable: true\n          });\n        }\n      };\n\n      postVisitCreate();\n    } else {\n      setVisitId(sessionStorage.getItem('visitId'));\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(VisitContext.Provider, {\n    value: visitId,\n    children: /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: children\n    }, void 0, false)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n};\n\n_s(VisitProvider, \"j4RJ/sFJ860X+LOz8lWf6c+YGig=\", false, function () {\n  return [useToast];\n});\n\n_c = VisitProvider;\nVisitProvider.propTypes = {\n  children: PropTypes.node\n};\nexport const useVisit = () => {\n  _s2();\n\n  const visitId = useContext(VisitContext);\n\n  if (visitId === 'undefined') {\n    throw new Error('useVisit is not defined within VisitProvider');\n  }\n\n  return visitId;\n};\n\n_s2(useVisit, \"+cWijyv5o6UGGANXJLKBBsN5AAQ=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"VisitProvider\");","map":{"version":3,"sources":["C:/Users/Acer/Desktop/Work/garaaz-distributor/src/contexts/VisitContext.js"],"names":["React","useContext","createContext","useEffect","useState","PropTypes","get","publicAxios","axios","useToast","VisitContext","VisitProvider","children","toast","visitId","setVisitId","sessionStorage","getItem","postVisitCreate","res","post","source","setItem","err","description","status","duration","isClosable","propTypes","node","useVisit","Error"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,aAA5B,EAA2CC,SAA3C,EAAsDC,QAAtD,QAAsE,OAAtE;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,GAAP,MAAgB,YAAhB;AACA,SAASC,WAAW,IAAIC,KAAxB,QAAqC,UAArC;AACA,SAASC,QAAT,QAAyB,kBAAzB;;;AAGA,MAAMC,YAAY,gBAAGR,aAAa,CAAC,EAAD,CAAlC;AAEA,OAAO,MAAMS,aAAa,GAAG,QAAkB;AAAA;;AAAA,MAAjB;AAAEC,IAAAA;AAAF,GAAiB;AAC7C,QAAMC,KAAK,GAAGJ,QAAQ,EAAtB;AACA,QAAM,CAACK,OAAD,EAAUC,UAAV,IAAwBX,QAAQ,CAAC,EAAD,CAAtC;AACAD,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIa,cAAc,CAACC,OAAf,CAAuB,SAAvB,MAAsC,IAA1C,EAAgD;AAC9C,YAAMC,eAAe,GAAG,YAAY;AAClC,YAAI;AACF,gBAAMC,GAAG,GAAG,MAAMX,KAAK,CAACY,IAAN,CAAW,SAAX,EAAsB;AACtCC,YAAAA,MAAM,EAAE;AAD8B,WAAtB,CAAlB;AAGAL,UAAAA,cAAc,CAACM,OAAf,CAAuB,SAAvB,EAAkChB,GAAG,CAACa,GAAD,EAAM,cAAN,EAAsB,EAAtB,CAArC;AACAJ,UAAAA,UAAU,CAACT,GAAG,CAACa,GAAD,EAAM,cAAN,EAAsB,EAAtB,CAAJ,CAAV;AACD,SAND,CAME,OAAOI,GAAP,EAAY;AACZV,UAAAA,KAAK,CAAC;AACJW,YAAAA,WAAW,EAAC,iCADR;AAEJC,YAAAA,MAAM,EAAE,OAFJ;AAGJC,YAAAA,QAAQ,EAAE,IAHN;AAIJC,YAAAA,UAAU,EAAE;AAJR,WAAD,CAAL;AAOD;AACF,OAhBD;;AAiBAT,MAAAA,eAAe;AAChB,KAnBD,MAoBK;AACHH,MAAAA,UAAU,CAACC,cAAc,CAACC,OAAf,CAAuB,SAAvB,CAAD,CAAV;AACD;AACF,GAxBQ,EAwBN,EAxBM,CAAT;AA0BA,sBACE,QAAC,YAAD,CAAc,QAAd;AAAuB,IAAA,KAAK,EAAEH,OAA9B;AAAA,2BACE;AAAA,gBAAGF;AAAH;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAKD,CAlCM;;GAAMD,a;UACGF,Q;;;KADHE,a;AAoCbA,aAAa,CAACiB,SAAd,GAA0B;AACxBhB,EAAAA,QAAQ,EAAEP,SAAS,CAACwB;AADI,CAA1B;AAIA,OAAO,MAAMC,QAAQ,GAAG,MAAM;AAAA;;AAC5B,QAAMhB,OAAO,GAAGb,UAAU,CAACS,YAAD,CAA1B;;AAEA,MAAII,OAAO,KAAK,WAAhB,EAA6B;AAC3B,UAAM,IAAIiB,KAAJ,CAAU,8CAAV,CAAN;AACD;;AAED,SAAOjB,OAAP;AACD,CARM;;IAAMgB,Q","sourcesContent":["import React, { useContext, createContext, useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport get from 'lodash/get';\r\nimport { publicAxios as axios } from '../axios';\r\nimport { useToast } from '@chakra-ui/toast';\r\n\r\n\r\nconst VisitContext = createContext('');\r\n\r\nexport const VisitProvider = ({ children }) => {\r\n  const toast = useToast()\r\n  const [visitId, setVisitId] = useState('');\r\n  useEffect(() => {\r\n    if (sessionStorage.getItem('visitId') === null) {\r\n      const postVisitCreate = async () => {\r\n        try {\r\n          const res = await axios.post('/visits', {\r\n            source: 'WEB',\r\n          });\r\n          sessionStorage.setItem('visitId', get(res, 'data.visitId', ''))\r\n          setVisitId(get(res, 'data.visitId', ''));\r\n        } catch (err) {\r\n          toast({\r\n            description:'Error occured, please try again',\r\n            status: 'error',\r\n            duration: 9000,\r\n            isClosable: true,\r\n          })\r\n  \r\n        }\r\n      };\r\n      postVisitCreate();\r\n    }\r\n    else {\r\n      setVisitId(sessionStorage.getItem('visitId'))\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <VisitContext.Provider value={visitId}>\r\n      <>{children}</>\r\n    </VisitContext.Provider>\r\n  );\r\n};\r\n\r\nVisitProvider.propTypes = {\r\n  children: PropTypes.node,\r\n};\r\n\r\nexport const useVisit = () => {\r\n  const visitId = useContext(VisitContext);\r\n\r\n  if (visitId === 'undefined') {\r\n    throw new Error('useVisit is not defined within VisitProvider');\r\n  }\r\n\r\n  return visitId;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}