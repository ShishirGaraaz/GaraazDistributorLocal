{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Acer\\\\Desktop\\\\Work\\\\garaaz-distributor\\\\src\\\\containers\\\\Inventory\\\\Inventory.js\",\n    _s = $RefreshSig$();\n\nimport React, { useMemo, useState, useRef, useEffect } from 'react';\nimport { useIntl } from 'react-intl';\nimport { Box, Button, Link, useDisclosure, Alert, AlertIcon, AlertDescription } from '@chakra-ui/react';\nimport readXlsxFile from 'read-excel-file';\nimport { useSelector, useDispatch } from 'react-redux';\nimport moment from 'moment';\nimport { useRouteMatch, Switch, Route, Link as ReactLink } from 'react-router-dom';\nimport DynamicTable from '../../components/DynamicTable';\nimport ModifiedTableTop, { generateInput } from '../../components/TableTop/ModifiedTableTop';\nimport SimpleModal from '../../components/Modal';\nimport withToast from '../../HOCs/withToast';\nimport getMoneyFormat from '../../utils/getMoneyFormat';\nimport getCamelCase from '../../utils/getCamelCase';\nimport { selectGlobalState } from '../../globalSlice';\nimport { Select as MultiSelect } from 'chakra-react-select';\nimport messages from './messages';\nimport { getAllStock, selectInventory, uploadStock, getBranchStocks } from './slice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst selectBranch = {\n  title: 'Select Branch',\n  type: 'select',\n  placeholder: 'Select option',\n  name: 'groupBy',\n  fullWidth: true,\n  options: []\n};\nconst mapSelect = [{\n  title: 'Location Code',\n  type: 'select',\n  placeholder: 'Select option',\n  name: 'locationCode',\n  isDisabled: false,\n  fullWidth: true,\n  defaultValue: {\n    value: 'Loc Code',\n    label: 'Loc Code'\n  },\n  options: [{\n    value: 'none',\n    label: 'None'\n  }, {\n    value: 'Loc Code',\n    label: 'Loc Code'\n  }]\n}, {\n  title: 'Part Number',\n  type: 'select',\n  placeholder: 'Select option',\n  name: 'partNumber',\n  fullWidth: true,\n  options: [{\n    value: 'none',\n    label: 'None'\n  }, {\n    value: 'Loc Code',\n    label: 'Loc Code'\n  }]\n},\n/*  {\r\n  title: 'Batch Code',\r\n  type: 'select',\r\n  placeholder: 'Select option',\r\n  name: 'batchCode',\r\n  fullWidth: true,\r\n  options: [\r\n    {\r\n      value: 'none',\r\n      label: 'None',\r\n    },\r\n    {\r\n      value: 'Loc Code',\r\n      label: 'Loc Code',\r\n    },\r\n  ],\r\n}, */\n{\n  title: 'Quantity',\n  type: 'select',\n  placeholder: 'Select option',\n  name: 'quantity',\n  fullWidth: true,\n  options: [{\n    value: 'none',\n    label: 'None'\n  }, {\n    value: 'Loc Code',\n    label: 'Loc Code'\n  }]\n}, {\n  title: 'Price',\n  type: 'select',\n  placeholder: 'Select option',\n  name: 'price',\n  fullWidth: true,\n  options: [{\n    value: 'none',\n    label: 'None'\n  }, {\n    value: 'Loc Code',\n    label: 'Loc Code'\n  }]\n}, {\n  title: 'Bin Location',\n  type: 'select',\n  placeholder: 'Select option',\n  name: 'binLocation',\n  fullWidth: true,\n  options: [{\n    value: 'none',\n    label: 'None'\n  }, {\n    value: 'Loc Code',\n    label: 'Loc Code'\n  }]\n}];\n\nconst Inventory = _ref => {\n  _s();\n\n  let {\n    notification\n  } = _ref;\n  const [inputValues, setInputValue] = useState({\n    start: moment().format('DD-MM-YYYY'),\n    end: moment().startOf('month').format('DD-MM-YYYY')\n  });\n  const intl = useIntl();\n  const importExcelRef = useRef();\n  const [isLoading, setIsLoading] = useState(false);\n  const {\n    allStock\n  } = useSelector(selectInventory);\n  const [batchinventoryList, setBatchinventoryList] = useState({\n    part: {},\n    batchinventory: []\n  });\n  const auth = useSelector(state => state.auth);\n  const dispatcher = useDispatch();\n  const {\n    url,\n    path\n  } = useRouteMatch();\n  const [tableLoading, setTableLoading] = useState(false);\n  const {\n    isOpen: mapingModalOpen,\n    onOpen: onMapingModalOpen,\n    onClose: onMapingModalClose\n  } = useDisclosure();\n  const {\n    isOpen: stockDataOpen,\n    onOpen: onStockDataOpen,\n    onClose: onStockDataClose\n  } = useDisclosure();\n  const {\n    isOpen: openSingleEntryDetail,\n    onOpen: onOpenSingleEntryDetail,\n    onClose: onCloseSingleEntryDetail\n  } = useDisclosure();\n  const [selectbranchComponent, setSelectbranchComponent] = useState(selectBranch);\n  const [mappingSelectState, setMapingSelectState] = useState(mapSelect);\n  const [processingImport, setProcessingImport] = useState(false);\n  const [rawImportedData, setRawImportedData] = useState([]);\n  const [mapKeys, setMapKey] = useState({});\n  const [processedImportedData, setProcessedImportedData] = useState([]);\n  const {\n    branches,\n    isDistributor\n  } = useSelector(selectGlobalState);\n  useEffect(() => {\n    (async () => {\n      try {\n        await dispatcher(getAllStock({\n          auth,\n          params: { ...inputValues\n          }\n        }));\n        const refinedBranch = [...branches].map(e => {\n          return {\n            value: e,\n            label: e.branchCode\n          };\n        });\n        setSelectbranchComponent(prev => ({ ...prev,\n          options: refinedBranch\n        }));\n      } catch (error) {}\n    })();\n  }, [branches]);\n  const inputData = useMemo(() => [\n  /* {\r\n    title: intl.formatMessage(messages.inventoryDetailSearch),\r\n    type: 'text',\r\n    placeholder: '',\r\n    name: 'searchAccount',\r\n  },\r\n  {\r\n    title: intl.formatMessage(messages.groupBy),\r\n    type: 'select',\r\n    placeholder: 'Select option',\r\n    name: 'groupBy',\r\n    options: [\r\n      {\r\n        value: 'none',\r\n        label: 'None',\r\n      },\r\n      {\r\n        value: 'Loc Code',\r\n        label: intl.formatMessage(messages.locCode),\r\n      },\r\n    ],\r\n  }, */\n  {\n    title: intl.formatMessage(messages.filterByBranch),\n    type: 'select',\n    placeholder: intl.formatMessage(messages.selectBranch),\n    name: 'filterByBranch',\n    options: [{\n      label: 'None',\n      value: 'none'\n    }, ...selectbranchComponent.options]\n  }], [selectbranchComponent]);\n  const singleDetailColumns = useMemo(() => [{\n    Header: intl.formatMessage(messages.sNo),\n    accessor: 'sno',\n    Cell: allData => {\n      var _allData$row;\n\n      return /*#__PURE__*/_jsxDEV(Box, {\n        children: (allData === null || allData === void 0 ? void 0 : (_allData$row = allData.row) === null || _allData$row === void 0 ? void 0 : _allData$row.index) + 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 18\n      }, this);\n    }\n  }, {\n    Header: intl.formatMessage(messages.locCode),\n    accessor: 'locationCode'\n  }, {\n    Header: intl.formatMessage(messages.quantity),\n    accessor: 'quantity'\n  }, {\n    Header: intl.formatMessage(messages.price),\n    accessor: 'price',\n    Cell: _ref2 => {\n      let {\n        value\n      } = _ref2;\n      return getMoneyFormat(value);\n    }\n  }, {\n    Header: intl.formatMessage(messages.binLocation),\n    accessor: 'binLocation'\n  }], []);\n  const columns = useMemo(() => [{\n    Header: intl.formatMessage(messages.sNo),\n    accessor: 'sno',\n    Cell: allData => {\n      var _allData$row2;\n\n      return /*#__PURE__*/_jsxDEV(Box, {\n        children: (allData === null || allData === void 0 ? void 0 : (_allData$row2 = allData.row) === null || _allData$row2 === void 0 ? void 0 : _allData$row2.index) + 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 18\n      }, this);\n    }\n  }, {\n    Header: intl.formatMessage(messages.partNo),\n    accessor: row => {\n      var _row$part;\n\n      return row === null || row === void 0 ? void 0 : (_row$part = row.part) === null || _row$part === void 0 ? void 0 : _row$part.partNumber;\n    }\n  }, {\n    Header: intl.formatMessage(messages.batchCode),\n    accessor: row => {\n      var _row$batchinventory$;\n\n      return row === null || row === void 0 ? void 0 : (_row$batchinventory$ = row.batchinventory[0]) === null || _row$batchinventory$ === void 0 ? void 0 : _row$batchinventory$.batchCode;\n    }\n  }, {\n    Header: intl.formatMessage(messages.locCode),\n    accessor: row => {\n      var _row$batchinventory$2;\n\n      return (_row$batchinventory$2 = row.batchinventory[0]) === null || _row$batchinventory$2 === void 0 ? void 0 : _row$batchinventory$2.locationCode;\n    }\n  }, {\n    Header: intl.formatMessage(messages.quantity),\n    accessor: 'quantity'\n  }, {\n    Header: intl.formatMessage(messages.price),\n    accessor: 'price',\n    Cell: _ref3 => {\n      let {\n        value\n      } = _ref3;\n      return getMoneyFormat(value);\n    }\n  }, {\n    Header: intl.formatMessage(messages.stockValue),\n    accessor: row => row.quantity * row.price,\n    Cell: _ref4 => {\n      let {\n        value\n      } = _ref4;\n      return getMoneyFormat(value);\n    }\n  }, {\n    Header: 'Actions',\n    accessor: row => ({\n      batchinventory: row.batchinventory,\n      part: row.part\n    }),\n    Cell: _ref5 => {\n      let {\n        value\n      } = _ref5;\n\n      const handleViewDetails = () => {\n        setBatchinventoryList({\n          part: value.part,\n          batchinventory: value.batchinventory\n        });\n        onOpenSingleEntryDetail();\n      };\n\n      return /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleViewDetails,\n        variant: \"link\",\n        children: \"View Details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 13\n      }, this);\n    }\n  }], []);\n  const previewColumns = useMemo(() => [{\n    Header: intl.formatMessage(messages.sNo),\n    accessor: 'sno',\n    Cell: allData => {\n      var _allData$row3;\n\n      return /*#__PURE__*/_jsxDEV(Box, {\n        children: (allData === null || allData === void 0 ? void 0 : (_allData$row3 = allData.row) === null || _allData$row3 === void 0 ? void 0 : _allData$row3.index) + 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 18\n      }, this);\n    }\n  }, {\n    Header: intl.formatMessage(messages.locCode),\n    accessor: 'locationCode'\n  }, {\n    Header: intl.formatMessage(messages.partNo),\n    accessor: 'partNumber'\n  },\n  /*  {\r\n    Header: intl.formatMessage(messages.batchCode),\r\n    accessor: 'batchCode',\r\n  }, */\n  {\n    Header: intl.formatMessage(messages.quantity),\n    accessor: 'quantity'\n  }, {\n    Header: intl.formatMessage(messages.price),\n    accessor: 'price',\n    Cell: _ref6 => {\n      let {\n        value\n      } = _ref6;\n      return getMoneyFormat(value);\n    }\n  }, {\n    Header: intl.formatMessage(messages.binLocation),\n    accessor: 'binLocation'\n  }], []);\n\n  const handleTableTopChange = async (e, name) => {\n    setTableLoading(true);\n    let value = e.hasOwnProperty('target') ? e.target.value : e;\n\n    if (name === 'filterByBranch') {\n      try {\n        if (typeof e.value === 'string') {\n          await dispatcher(getAllStock({\n            auth,\n            params: { ...inputValues,\n              [name]: typeof value !== 'object' ? value : value.value === 'none' ? '' : value.value\n            }\n          }));\n        } else {\n          var _e$value;\n\n          await dispatcher(getBranchStocks({\n            auth,\n            branchId: e === null || e === void 0 ? void 0 : (_e$value = e.value) === null || _e$value === void 0 ? void 0 : _e$value._id\n          }));\n        }\n\n        setTableLoading(false);\n      } catch (error) {\n        setTableLoading(false);\n      }\n\n      return;\n    }\n\n    try {\n      await dispatcher(getAllStock({\n        auth,\n        params: { ...inputValues,\n          [name]: typeof value !== 'object' ? value : value.value === 'none' ? '' : value.value\n        }\n      }));\n      setTableLoading(false);\n    } catch (error) {\n      setTableLoading(false);\n    }\n  };\n\n  const handleMapping = (e, name) => {\n    setMapKey(prevState => ({ ...prevState,\n      [name]: e\n    }));\n  };\n\n  const handleImportExcelButton = () => {\n    importExcelRef.current.click();\n  };\n\n  const handleImportChange = async e => {\n    const rows = await readXlsxFile(e.target.files[0]);\n    const refinedHeader = rows[0].map(e => ({\n      value: e,\n      label: e\n    }));\n    setMapingSelectState(prevState => {\n      return prevState.map(el => {\n        el.options = refinedHeader;\n        return el;\n      });\n    });\n    const key = rows[0];\n    const importedData = [];\n    rows.slice(1).forEach(row => {\n      importedData.push(Object.fromEntries(row.map((e, index) => {\n        return [key[index], e];\n      })));\n    });\n    setRawImportedData(importedData);\n    onMapingModalOpen();\n    e.target.value = null; //reset the file input\n  };\n\n  const handleUploadReview = () => {\n    const uniqueKeys = [...new Set(Object.values({ ...mapKeys\n    }).map(e => e.value))];\n\n    if (uniqueKeys.length !== Object.values({ ...mapKeys\n    }).length) {\n      notification({\n        status: 'error',\n        description: intl.formatMessage(messages.fieldValueMessage)\n      });\n      return;\n    }\n\n    const processedImportData = [...rawImportedData].map((e, index) => {\n      const data = Object.entries({ ...mapKeys\n      }).map(_ref7 => {\n        let [key, value] = _ref7;\n        return [key, e[value.label]];\n      });\n      return Object.fromEntries(data);\n    });\n    setProcessedImportedData(processedImportData);\n    onStockDataOpen();\n  };\n\n  const handleStockDataUpload = async () => {\n    try {\n      setIsLoading(true);\n      const validCodeWithBrandId = [];\n      const invalidBranchCodes = [];\n      const branchCodes = [...new Set([...processedImportedData].map(item => {\n        return item.locationCode;\n      }))];\n      branchCodes.forEach(code => {\n        const branch = branches.find(bran => bran.branchCode === code);\n\n        if (branch) {\n          validCodeWithBrandId.push({\n            branchCode: code,\n            branchId: branch._id\n          });\n        } else {\n          invalidBranchCodes.push(code);\n        }\n      });\n\n      if (invalidBranchCodes.length) {\n        notification({\n          status: 'warning',\n          title: 'Invalid Branch Codes',\n          description: `${invalidBranchCodes.join(',')} are not valid`\n        });\n      }\n\n      validCodeWithBrandId.map(item => {\n        const entries = processedImportedData.filter(data => data.locationCode === item.branchCode);\n        item.stocks = entries;\n        delete item.branchCode;\n        return item;\n      });\n      const data = {\n        inventory: validCodeWithBrandId\n      };\n      await dispatcher(uploadStock({\n        auth,\n        data\n      }));\n      await dispatcher(getAllStock({\n        auth,\n        params: { ...inputValues\n        }\n      }));\n      setIsLoading(false);\n      onMapingModalClose();\n      onStockDataClose();\n      notification({\n        status: 'success',\n        description: `${intl.formatMessage(messages.stockHasBeenAdded)}`\n      });\n    } catch (error) {\n      notification({\n        status: 'error',\n        description: error !== null && error !== void 0 ? error : intl.formatMessage(messages.tryAgain)\n      });\n      setIsLoading(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Switch, {\n    children: /*#__PURE__*/_jsxDEV(Route, {\n      exact: true,\n      path: path,\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        minHeight: \"80vh\",\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          children: /*#__PURE__*/_jsxDEV(Alert, {\n            status: \"info\",\n            children: [/*#__PURE__*/_jsxDEV(AlertIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 583,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(AlertDescription, {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Download a sample file from here \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 585,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                style: {\n                  fontWeight: 'bold'\n                },\n                href: \"https://docs.google.com/uc?id=1qUvhuzsqNE6CV_GLaK7spluz8qISdhWz&export=download\",\n                download: \"Inventory sample File\",\n                children: \"Download File\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 586,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 584,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 582,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 581,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModifiedTableTop, {\n          inputData: inputData,\n          onChange: handleTableTopChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 597,\n          columnNumber: 11\n        }, this), isDistributor && /*#__PURE__*/_jsxDEV(Box, {\n          display: \"flex\",\n          justifyContent: \"flex-end\",\n          mb: 6,\n          width: \"100%\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            accept: \".xlsx\",\n            ref: importExcelRef,\n            type: \"file\",\n            onChange: handleImportChange,\n            style: {\n              display: 'none'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 603,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"normal\",\n            onClick:\n            /* onOpen */\n            handleImportExcelButton,\n            children: intl.formatMessage(messages.bulkUpload)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 610,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 602,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DynamicTable, {\n          columns: columns,\n          data: allStock,\n          fetchData: () => console.log('...fetching'),\n          skipPageReset: true,\n          loading: tableLoading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 619,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(SimpleModal, {\n          size: \"xl\",\n          onOk: handleUploadReview,\n          isLoading: false,\n          onClose: onMapingModalClose,\n          isOpen: mapingModalOpen,\n          title: intl.formatMessage(messages.mapFields),\n          okText: intl.formatMessage(messages.next),\n          isModalBody: true,\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            display: \"flex\",\n            flexWrap: \"wrap\",\n            justifyContent: \"space-between\",\n            children: mappingSelectState.map(e => {\n              return /*#__PURE__*/_jsxDEV(Box, {\n                width: \"49%\",\n                children: generateInput(e, handleMapping)\n              }, e.name, false, {\n                fileName: _jsxFileName,\n                lineNumber: 641,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 638,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 628,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(SimpleModal, {\n          size: \"2.5xl\",\n          onOk: handleStockDataUpload,\n          isLoading: isLoading,\n          onClose: onStockDataClose,\n          isOpen: stockDataOpen,\n          title: `${intl.formatMessage(messages.stockData)}`,\n          okText: intl.formatMessage(messages.uploadStock),\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            height: \"100%\",\n            children: /*#__PURE__*/_jsxDEV(DynamicTable, {\n              columns: previewColumns,\n              data: processedImportedData,\n              fetchData: () => console.log('...fetching'),\n              skipPageReset: true,\n              loading: tableLoading,\n              hidePagination: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 658,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 657,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 648,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(SimpleModal, {\n          onClose: onCloseSingleEntryDetail,\n          isOpen: openSingleEntryDetail,\n          title: `${batchinventoryList.part.partName} - ${batchinventoryList.part.partNumber}`,\n          hidefooter: true,\n          size: \"2.5xl\",\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            m: 5,\n            children: /*#__PURE__*/_jsxDEV(DynamicTable, {\n              columns: singleDetailColumns,\n              data: batchinventoryList.batchinventory,\n              fetchData: () => console.log('...fetching'),\n              skipPageReset: true,\n              loading: tableLoading,\n              hidePagination: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 676,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 675,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 668,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 580,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 579,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 578,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Inventory, \"W6ikLR9CVuBwVn66giryKCPJEHc=\", false, function () {\n  return [useIntl, useSelector, useSelector, useDispatch, useRouteMatch, useDisclosure, useDisclosure, useDisclosure, useSelector];\n});\n\n_c = Inventory;\nexport default _c2 = withToast(Inventory);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Inventory\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["C:/Users/Acer/Desktop/Work/garaaz-distributor/src/containers/Inventory/Inventory.js"],"names":["React","useMemo","useState","useRef","useEffect","useIntl","Box","Button","Link","useDisclosure","Alert","AlertIcon","AlertDescription","readXlsxFile","useSelector","useDispatch","moment","useRouteMatch","Switch","Route","ReactLink","DynamicTable","ModifiedTableTop","generateInput","SimpleModal","withToast","getMoneyFormat","getCamelCase","selectGlobalState","Select","MultiSelect","messages","getAllStock","selectInventory","uploadStock","getBranchStocks","selectBranch","title","type","placeholder","name","fullWidth","options","mapSelect","isDisabled","defaultValue","value","label","Inventory","notification","inputValues","setInputValue","start","format","end","startOf","intl","importExcelRef","isLoading","setIsLoading","allStock","batchinventoryList","setBatchinventoryList","part","batchinventory","auth","state","dispatcher","url","path","tableLoading","setTableLoading","isOpen","mapingModalOpen","onOpen","onMapingModalOpen","onClose","onMapingModalClose","stockDataOpen","onStockDataOpen","onStockDataClose","openSingleEntryDetail","onOpenSingleEntryDetail","onCloseSingleEntryDetail","selectbranchComponent","setSelectbranchComponent","mappingSelectState","setMapingSelectState","processingImport","setProcessingImport","rawImportedData","setRawImportedData","mapKeys","setMapKey","processedImportedData","setProcessedImportedData","branches","isDistributor","params","refinedBranch","map","e","branchCode","prev","error","inputData","formatMessage","filterByBranch","singleDetailColumns","Header","sNo","accessor","Cell","allData","row","index","locCode","quantity","price","binLocation","columns","partNo","partNumber","batchCode","locationCode","stockValue","handleViewDetails","previewColumns","handleTableTopChange","hasOwnProperty","target","branchId","_id","handleMapping","prevState","handleImportExcelButton","current","click","handleImportChange","rows","files","refinedHeader","el","key","importedData","slice","forEach","push","Object","fromEntries","handleUploadReview","uniqueKeys","Set","values","length","status","description","fieldValueMessage","processedImportData","data","entries","handleStockDataUpload","validCodeWithBrandId","invalidBranchCodes","branchCodes","item","code","branch","find","bran","join","filter","stocks","inventory","stockHasBeenAdded","tryAgain","fontWeight","display","bulkUpload","console","log","mapFields","next","stockData","partName"],"mappings":"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","sourcesContent":["import React, { useMemo, useState, useRef, useEffect } from 'react';\r\n\r\nimport { useIntl } from 'react-intl';\r\nimport {\r\n  Box,\r\n  Button,\r\n  Link,\r\n  useDisclosure,\r\n  Alert,\r\n  AlertIcon,\r\n  AlertDescription,\r\n} from '@chakra-ui/react';\r\nimport readXlsxFile from 'read-excel-file';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport moment from 'moment';\r\nimport {\r\n  useRouteMatch,\r\n  Switch,\r\n  Route,\r\n  Link as ReactLink,\r\n} from 'react-router-dom';\r\nimport DynamicTable from '../../components/DynamicTable';\r\nimport ModifiedTableTop, {\r\n  generateInput,\r\n} from '../../components/TableTop/ModifiedTableTop';\r\nimport SimpleModal from '../../components/Modal';\r\nimport withToast from '../../HOCs/withToast';\r\nimport getMoneyFormat from '../../utils/getMoneyFormat';\r\nimport getCamelCase from '../../utils/getCamelCase';\r\nimport { selectGlobalState } from '../../globalSlice';\r\nimport { Select as MultiSelect } from 'chakra-react-select';\r\nimport messages from './messages';\r\nimport {\r\n  getAllStock,\r\n  selectInventory,\r\n  uploadStock,\r\n  getBranchStocks,\r\n} from './slice';\r\n\r\nconst selectBranch = {\r\n  title: 'Select Branch',\r\n  type: 'select',\r\n  placeholder: 'Select option',\r\n  name: 'groupBy',\r\n  fullWidth: true,\r\n  options: [],\r\n};\r\n\r\nconst mapSelect = [\r\n  {\r\n    title: 'Location Code',\r\n    type: 'select',\r\n    placeholder: 'Select option',\r\n    name: 'locationCode',\r\n    isDisabled: false,\r\n    fullWidth: true,\r\n    defaultValue: {\r\n      value: 'Loc Code',\r\n      label: 'Loc Code',\r\n    },\r\n    options: [\r\n      {\r\n        value: 'none',\r\n        label: 'None',\r\n      },\r\n      {\r\n        value: 'Loc Code',\r\n        label: 'Loc Code',\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    title: 'Part Number',\r\n    type: 'select',\r\n    placeholder: 'Select option',\r\n    name: 'partNumber',\r\n    fullWidth: true,\r\n    options: [\r\n      {\r\n        value: 'none',\r\n        label: 'None',\r\n      },\r\n      {\r\n        value: 'Loc Code',\r\n        label: 'Loc Code',\r\n      },\r\n    ],\r\n  },\r\n  /*  {\r\n    title: 'Batch Code',\r\n    type: 'select',\r\n    placeholder: 'Select option',\r\n    name: 'batchCode',\r\n    fullWidth: true,\r\n    options: [\r\n      {\r\n        value: 'none',\r\n        label: 'None',\r\n      },\r\n      {\r\n        value: 'Loc Code',\r\n        label: 'Loc Code',\r\n      },\r\n    ],\r\n  }, */\r\n  {\r\n    title: 'Quantity',\r\n    type: 'select',\r\n    placeholder: 'Select option',\r\n    name: 'quantity',\r\n    fullWidth: true,\r\n    options: [\r\n      {\r\n        value: 'none',\r\n        label: 'None',\r\n      },\r\n      {\r\n        value: 'Loc Code',\r\n        label: 'Loc Code',\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    title: 'Price',\r\n    type: 'select',\r\n    placeholder: 'Select option',\r\n    name: 'price',\r\n    fullWidth: true,\r\n    options: [\r\n      {\r\n        value: 'none',\r\n        label: 'None',\r\n      },\r\n      {\r\n        value: 'Loc Code',\r\n        label: 'Loc Code',\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    title: 'Bin Location',\r\n    type: 'select',\r\n    placeholder: 'Select option',\r\n    name: 'binLocation',\r\n    fullWidth: true,\r\n    options: [\r\n      {\r\n        value: 'none',\r\n        label: 'None',\r\n      },\r\n      {\r\n        value: 'Loc Code',\r\n        label: 'Loc Code',\r\n      },\r\n    ],\r\n  },\r\n];\r\n\r\nconst Inventory = ({ notification }) => {\r\n  const [inputValues, setInputValue] = useState({\r\n    start: moment().format('DD-MM-YYYY'),\r\n    end: moment().startOf('month').format('DD-MM-YYYY'),\r\n  });\r\n  const intl = useIntl();\r\n  const importExcelRef = useRef();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const { allStock } = useSelector(selectInventory);\r\n  const [batchinventoryList, setBatchinventoryList] = useState({\r\n    part: {},\r\n    batchinventory: [],\r\n  });\r\n  const auth = useSelector((state) => state.auth);\r\n  const dispatcher = useDispatch();\r\n  const { url, path } = useRouteMatch();\r\n  const [tableLoading, setTableLoading] = useState(false);\r\n  const {\r\n    isOpen: mapingModalOpen,\r\n    onOpen: onMapingModalOpen,\r\n    onClose: onMapingModalClose,\r\n  } = useDisclosure();\r\n  const {\r\n    isOpen: stockDataOpen,\r\n    onOpen: onStockDataOpen,\r\n    onClose: onStockDataClose,\r\n  } = useDisclosure();\r\n  const {\r\n    isOpen: openSingleEntryDetail,\r\n    onOpen: onOpenSingleEntryDetail,\r\n    onClose: onCloseSingleEntryDetail,\r\n  } = useDisclosure();\r\n  const [selectbranchComponent, setSelectbranchComponent] =\r\n    useState(selectBranch);\r\n  const [mappingSelectState, setMapingSelectState] = useState(mapSelect);\r\n  const [processingImport, setProcessingImport] = useState(false);\r\n  const [rawImportedData, setRawImportedData] = useState([]);\r\n  const [mapKeys, setMapKey] = useState({});\r\n  const [processedImportedData, setProcessedImportedData] = useState([]);\r\n  const { branches, isDistributor } = useSelector(selectGlobalState);\r\n\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        await dispatcher(getAllStock({ auth, params: { ...inputValues } }));\r\n\r\n        const refinedBranch = [...branches].map((e) => {\r\n          return { value: e, label: e.branchCode };\r\n        });\r\n\r\n        setSelectbranchComponent((prev) => ({\r\n          ...prev,\r\n          options: refinedBranch,\r\n        }));\r\n      } catch (error) {}\r\n    })();\r\n  }, [branches]);\r\n\r\n  const inputData = useMemo(\r\n    () => [\r\n      /* {\r\n        title: intl.formatMessage(messages.inventoryDetailSearch),\r\n        type: 'text',\r\n        placeholder: '',\r\n        name: 'searchAccount',\r\n      },\r\n      {\r\n        title: intl.formatMessage(messages.groupBy),\r\n        type: 'select',\r\n        placeholder: 'Select option',\r\n        name: 'groupBy',\r\n        options: [\r\n          {\r\n            value: 'none',\r\n            label: 'None',\r\n          },\r\n          {\r\n            value: 'Loc Code',\r\n            label: intl.formatMessage(messages.locCode),\r\n          },\r\n        ],\r\n      }, */\r\n      {\r\n        title: intl.formatMessage(messages.filterByBranch),\r\n        type: 'select',\r\n        placeholder: intl.formatMessage(messages.selectBranch),\r\n        name: 'filterByBranch',\r\n        options: [\r\n          { label: 'None', value: 'none' },\r\n          ...selectbranchComponent.options,\r\n        ],\r\n      },\r\n    ],\r\n    [selectbranchComponent],\r\n  );\r\n\r\n  const singleDetailColumns = useMemo(\r\n    () => [\r\n      {\r\n        Header: intl.formatMessage(messages.sNo),\r\n        accessor: 'sno',\r\n        Cell: (allData) => {\r\n          return <Box>{allData?.row?.index + 1}</Box>;\r\n        },\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.locCode),\r\n        accessor: 'locationCode',\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.quantity),\r\n        accessor: 'quantity',\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.price),\r\n        accessor: 'price',\r\n        Cell: ({ value }) => getMoneyFormat(value),\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.binLocation),\r\n        accessor: 'binLocation',\r\n      },\r\n    ],\r\n    [],\r\n  );\r\n\r\n  const columns = useMemo(\r\n    () => [\r\n      {\r\n        Header: intl.formatMessage(messages.sNo),\r\n        accessor: 'sno',\r\n        Cell: (allData) => {\r\n          return <Box>{allData?.row?.index + 1}</Box>;\r\n        },\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.partNo),\r\n        accessor: (row) => row?.part?.partNumber,\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.batchCode),\r\n        accessor: (row) => row?.batchinventory[0]?.batchCode,\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.locCode),\r\n        accessor: (row) => row.batchinventory[0]?.locationCode,\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.quantity),\r\n        accessor: 'quantity',\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.price),\r\n        accessor: 'price',\r\n        Cell: ({ value }) => getMoneyFormat(value),\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.stockValue),\r\n        accessor: (row) => row.quantity * row.price,\r\n        Cell: ({ value }) => getMoneyFormat(value),\r\n      },\r\n      {\r\n        Header: 'Actions',\r\n        accessor: (row) => ({\r\n          batchinventory: row.batchinventory,\r\n          part: row.part,\r\n        }),\r\n        Cell: ({ value }) => {\r\n          const handleViewDetails = () => {\r\n            setBatchinventoryList({\r\n              part: value.part,\r\n              batchinventory: value.batchinventory,\r\n            });\r\n            onOpenSingleEntryDetail();\r\n          };\r\n          return (\r\n            <Button onClick={handleViewDetails} variant='link'>\r\n              View Details\r\n            </Button>\r\n          );\r\n        },\r\n      },\r\n    ],\r\n    [],\r\n  );\r\n\r\n  const previewColumns = useMemo(\r\n    () => [\r\n      {\r\n        Header: intl.formatMessage(messages.sNo),\r\n        accessor: 'sno',\r\n        Cell: (allData) => {\r\n          return <Box>{allData?.row?.index + 1}</Box>;\r\n        },\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.locCode),\r\n        accessor: 'locationCode',\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.partNo),\r\n        accessor: 'partNumber',\r\n      },\r\n      /*  {\r\n        Header: intl.formatMessage(messages.batchCode),\r\n        accessor: 'batchCode',\r\n      }, */\r\n      {\r\n        Header: intl.formatMessage(messages.quantity),\r\n        accessor: 'quantity',\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.price),\r\n        accessor: 'price',\r\n        Cell: ({ value }) => getMoneyFormat(value),\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.binLocation),\r\n        accessor: 'binLocation',\r\n      },\r\n    ],\r\n    [],\r\n  );\r\n\r\n  const handleTableTopChange = async (e, name) => {\r\n    setTableLoading(true);\r\n    let value = e.hasOwnProperty('target') ? e.target.value : e;\r\n\r\n    if (name === 'filterByBranch') {\r\n      try {\r\n        if (typeof e.value === 'string') {\r\n          await dispatcher(\r\n            getAllStock({\r\n              auth,\r\n              params: {\r\n                ...inputValues,\r\n                [name]:\r\n                  typeof value !== 'object'\r\n                    ? value\r\n                    : value.value === 'none'\r\n                    ? ''\r\n                    : value.value,\r\n              },\r\n            }),\r\n          );\r\n        } else {\r\n          await dispatcher(getBranchStocks({ auth, branchId: e?.value?._id }));\r\n        }\r\n\r\n        setTableLoading(false);\r\n      } catch (error) {\r\n        setTableLoading(false);\r\n      }\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await dispatcher(\r\n        getAllStock({\r\n          auth,\r\n          params: {\r\n            ...inputValues,\r\n            [name]:\r\n              typeof value !== 'object'\r\n                ? value\r\n                : value.value === 'none'\r\n                ? ''\r\n                : value.value,\r\n          },\r\n        }),\r\n      );\r\n\r\n      setTableLoading(false);\r\n    } catch (error) {\r\n      setTableLoading(false);\r\n    }\r\n  };\r\n\r\n\r\n  const handleMapping = (e, name) => {\r\n    setMapKey((prevState) => ({\r\n      ...prevState,\r\n      [name]: e,\r\n    }));\r\n  };\r\n\r\n  const handleImportExcelButton = () => {\r\n    importExcelRef.current.click();\r\n  };\r\n\r\n  const handleImportChange = async (e) => {\r\n    const rows = await readXlsxFile(e.target.files[0]);\r\n\r\n    const refinedHeader = rows[0].map((e) => ({\r\n      value: e,\r\n      label: e,\r\n    }));\r\n\r\n    setMapingSelectState((prevState) => {\r\n      return prevState.map((el) => {\r\n        el.options = refinedHeader;\r\n        return el;\r\n      });\r\n    });\r\n\r\n    const key = rows[0];\r\n\r\n    const importedData = [];\r\n\r\n    rows.slice(1).forEach((row) => {\r\n      importedData.push(\r\n        Object.fromEntries(\r\n          row.map((e, index) => {\r\n            return [key[index], e];\r\n          }),\r\n        ),\r\n      );\r\n    });\r\n\r\n    setRawImportedData(importedData);\r\n    onMapingModalOpen();\r\n\r\n    e.target.value = null; //reset the file input\r\n  };\r\n\r\n  const handleUploadReview = () => {\r\n    const uniqueKeys = [\r\n      ...new Set(Object.values({ ...mapKeys }).map((e) => e.value)),\r\n    ];\r\n    if (uniqueKeys.length !== Object.values({ ...mapKeys }).length) {\r\n      notification({\r\n        status: 'error',\r\n        description: intl.formatMessage(messages.fieldValueMessage),\r\n      });\r\n      return;\r\n    }\r\n\r\n    const processedImportData = [...rawImportedData].map((e, index) => {\r\n      const data = Object.entries({ ...mapKeys }).map(([key, value]) => {\r\n        return [key, e[value.label]];\r\n      });\r\n      return Object.fromEntries(data);\r\n    });\r\n\r\n\r\n    setProcessedImportedData(processedImportData);\r\n    onStockDataOpen();\r\n  };\r\n\r\n  const handleStockDataUpload = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n\r\n      const validCodeWithBrandId = [];\r\n      const invalidBranchCodes = [];\r\n\r\n      const branchCodes = [\r\n        ...new Set(\r\n          [...processedImportedData].map((item) => {\r\n            return item.locationCode;\r\n          }),\r\n        ),\r\n      ];\r\n\r\n      branchCodes.forEach((code) => {\r\n        const branch = branches.find((bran) => bran.branchCode === code);\r\n\r\n        if (branch) {\r\n          validCodeWithBrandId.push({\r\n            branchCode: code,\r\n            branchId: branch._id,\r\n          });\r\n        } else {\r\n          invalidBranchCodes.push(code);\r\n        }\r\n      });\r\n\r\n      if (invalidBranchCodes.length) {\r\n        notification({\r\n          status: 'warning',\r\n          title: 'Invalid Branch Codes',\r\n          description: `${invalidBranchCodes.join(',')} are not valid`,\r\n        });\r\n      }\r\n\r\n      validCodeWithBrandId.map((item) => {\r\n        const entries = processedImportedData.filter(\r\n          (data) => data.locationCode === item.branchCode,\r\n        );\r\n\r\n        item.stocks = entries;\r\n        delete item.branchCode;\r\n\r\n        return item;\r\n      });\r\n\r\n      const data = {\r\n        inventory: validCodeWithBrandId,\r\n      };\r\n      await dispatcher(uploadStock({ auth, data }));\r\n      await dispatcher(getAllStock({ auth, params: { ...inputValues } }));\r\n      setIsLoading(false);\r\n      onMapingModalClose();\r\n      onStockDataClose();\r\n      notification({\r\n        status: 'success',\r\n        description: `${intl.formatMessage(messages.stockHasBeenAdded)}`,\r\n      });\r\n    } catch (error) {\r\n      notification({\r\n        status: 'error',\r\n        description: error ?? intl.formatMessage(messages.tryAgain),\r\n      });\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Switch>\r\n      <Route exact path={path}>\r\n        <Box minHeight='80vh'>\r\n          <Box>\r\n            <Alert status='info'>\r\n              <AlertIcon />\r\n              <AlertDescription>\r\n                <label>Download a sample file from here </label>\r\n                <a\r\n                  style={{ fontWeight: 'bold' }}\r\n                  href='https://docs.google.com/uc?id=1qUvhuzsqNE6CV_GLaK7spluz8qISdhWz&export=download'\r\n                  download='Inventory sample File'\r\n                >\r\n                  Download File\r\n                </a>\r\n              </AlertDescription>\r\n            </Alert>\r\n          </Box>\r\n\r\n          <ModifiedTableTop\r\n            inputData={inputData}\r\n            onChange={handleTableTopChange}\r\n          />\r\n          {isDistributor && (\r\n            <Box display='flex' justifyContent='flex-end' mb={6} width='100%'>\r\n              <input\r\n                accept='.xlsx'\r\n                ref={importExcelRef}\r\n                type='file'\r\n                onChange={handleImportChange}\r\n                style={{ display: 'none' }}\r\n              />\r\n              <Button\r\n                variant='normal'\r\n                onClick={/* onOpen */ handleImportExcelButton}\r\n              >\r\n                {intl.formatMessage(messages.bulkUpload)}\r\n              </Button>\r\n            </Box>\r\n          )}\r\n\r\n          <DynamicTable\r\n            columns={columns}\r\n            data={allStock}\r\n            fetchData={() => console.log('...fetching')}\r\n            skipPageReset={true}\r\n            loading={tableLoading}\r\n          />\r\n         \r\n\r\n          <SimpleModal\r\n            size='xl'\r\n            onOk={handleUploadReview}\r\n            isLoading={false}\r\n            onClose={onMapingModalClose}\r\n            isOpen={mapingModalOpen}\r\n            title={intl.formatMessage(messages.mapFields)}\r\n            okText={intl.formatMessage(messages.next)}\r\n            isModalBody={true}\r\n          >\r\n            <Box display='flex' flexWrap='wrap' justifyContent='space-between'>\r\n              {mappingSelectState.map((e) => {\r\n                return (\r\n                  <Box key={e.name} width='49%'>\r\n                    {generateInput(e, handleMapping)}\r\n                  </Box>\r\n                );\r\n              })}\r\n            </Box>\r\n          </SimpleModal>\r\n          <SimpleModal\r\n            size='2.5xl'\r\n            onOk={handleStockDataUpload}\r\n            isLoading={isLoading}\r\n            onClose={onStockDataClose}\r\n            isOpen={stockDataOpen}\r\n            title={`${intl.formatMessage(messages.stockData)}`}\r\n            okText={intl.formatMessage(messages.uploadStock)}\r\n          >\r\n            <Box height='100%'>\r\n              <DynamicTable\r\n                columns={previewColumns}\r\n                data={processedImportedData}\r\n                fetchData={() => console.log('...fetching')}\r\n                skipPageReset={true}\r\n                loading={tableLoading}\r\n                hidePagination={true}\r\n              />\r\n            </Box>\r\n          </SimpleModal>\r\n          <SimpleModal\r\n            onClose={onCloseSingleEntryDetail}\r\n            isOpen={openSingleEntryDetail}\r\n            title={`${batchinventoryList.part.partName} - ${batchinventoryList.part.partNumber}`}\r\n            hidefooter\r\n            size='2.5xl'\r\n          >\r\n            <Box m={5}>\r\n              <DynamicTable\r\n                columns={singleDetailColumns}\r\n                data={batchinventoryList.batchinventory}\r\n                fetchData={() => console.log('...fetching')}\r\n                skipPageReset={true}\r\n                loading={tableLoading}\r\n                hidePagination={true}\r\n              />\r\n            </Box>\r\n          </SimpleModal>\r\n        </Box>\r\n      </Route>\r\n    </Switch>\r\n  );\r\n};\r\n\r\nexport default withToast(Inventory);\r\n"]},"metadata":{},"sourceType":"module"}