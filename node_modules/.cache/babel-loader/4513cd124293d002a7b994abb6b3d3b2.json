{"ast":null,"code":"\"use strict\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MagnifyContainerPortal = void 0;\n\nconst jsx_runtime_1 = require(\"react/jsx-runtime\");\n\nconst react_1 = require(\"react\"); // eslint-disable-next-line import/no-extraneous-dependencies\n\n\nconst react_dom_1 = require(\"react-dom\");\n\nconst react_popper_1 = require(\"react-popper\");\n\nconst MaginfyContainer_1 = require(\"./MaginfyContainer\");\n\nconst useLazyRef_1 = require(\"./hooks/useLazyRef\"); // import { styleToCssText } from 'src/utils';\n\n\nconst constants_1 = require(\"./constants\");\n\nexports.MagnifyContainerPortal = (0, react_1.forwardRef)((props, ref) => {\n  const {\n    portalProps = {}\n  } = props,\n        rest = __rest(props, [\"portalProps\"]);\n\n  const {\n    className,\n    id,\n    style,\n    placement = constants_1.MagnifiedImagePosition.LEFT,\n    strategy,\n    onFirstUpdate,\n    dataTestId,\n    modifiers = [],\n    horizontalOffset = 0,\n    verticalOffset = 0\n  } = portalProps;\n  const [popperElement, setPopperElement] = (0, react_1.useState)(null);\n  const popper = (0, react_popper_1.usePopper)(ref.current, popperElement, {\n    placement: placement,\n    strategy,\n    onFirstUpdate,\n    modifiers: [{\n      name: 'offset',\n      options: {\n        offset: [verticalOffset, horizontalOffset]\n      }\n    }, ...modifiers]\n  });\n  const randId = (0, useLazyRef_1.useLazyRef)(() => Math.floor(Math.random() * 9999));\n  const portalRef = (0, useLazyRef_1.useLazyRef)(() => document.createElement('div'));\n  const popperRef = (0, react_1.useCallback)(node => {\n    if (node !== null) {\n      setPopperElement(node);\n    }\n  }, []);\n  const el = portalRef.current;\n  el.id = id || `${constants_1.DEFAULT_PORTAL_ID}-${randId.current}`; // el.style.cssText = styleToCssText({ zIndex: 101, ...style });\n\n  if (className) {\n    el.className = className;\n  }\n\n  if (dataTestId) {\n    el.setAttribute('data-test-id', dataTestId);\n  }\n\n  (0, react_1.useEffect)(() => {\n    document.body.appendChild(el);\n    return () => {\n      document.body.removeChild(el);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return (0, react_dom_1.createPortal)((0, jsx_runtime_1.jsx)(\"div\", Object.assign({\n    ref: popperRef,\n    style: Object.assign(Object.assign({\n      zIndex: 101\n    }, popper.styles.popper), style)\n  }, popper.attributes.popper, {\n    children: (0, jsx_runtime_1.jsx)(MaginfyContainer_1.MagnifyContainer, Object.assign({\n      isPortalRendered: true\n    }, rest), void 0)\n  }), void 0), el);\n});","map":{"version":3,"sources":["../../src/MagnifyContainerPortal.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n    ComponentProps, forwardRef, MutableRefObject, useCallback, useEffect, useState,\n} from 'react';\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport { createPortal } from 'react-dom';\nimport { usePopper } from 'react-popper';\nimport type { Placement } from '@popperjs/core';\n\nimport { MagnifyContainer } from 'src/MaginfyContainer';\nimport { useLazyRef } from 'src/hooks/useLazyRef';\n// import { styleToCssText } from 'src/utils';\nimport { DEFAULT_PORTAL_ID, MagnifiedImagePosition } from 'src/constants';\nimport type { PortalProps } from 'src/types';\n\nexport interface PropTypes extends ComponentProps<typeof MagnifyContainer> {\n    portalProps?: PortalProps;\n}\n\nexport const MagnifyContainerPortal = forwardRef<HTMLImageElement, PropTypes>((props: PropTypes, ref): JSX.Element => {\n    const {\n        portalProps = {},\n        ...rest\n    } = props;\n\n    const {\n        className,\n        id,\n        style,\n        placement = MagnifiedImagePosition.LEFT,\n        strategy,\n        onFirstUpdate,\n        dataTestId,\n        modifiers = [],\n        horizontalOffset = 0,\n        verticalOffset = 0,\n    } = portalProps;\n    const [popperElement, setPopperElement] = useState(null);\n    const popper = usePopper((ref as MutableRefObject<HTMLImageElement>).current, popperElement, {\n        placement: (placement as Placement),\n        strategy,\n        onFirstUpdate,\n        modifiers: [\n            {\n                name: 'offset',\n                options: {\n                    offset: [verticalOffset, horizontalOffset],\n                },\n            },\n            ...modifiers,\n        ],\n    });\n    const randId = useLazyRef<number>(() => (Math.floor(Math.random() * 9999)));\n    const portalRef = useLazyRef<HTMLDivElement>(() => document.createElement('div'));\n    const popperRef = useCallback((node) => {\n        if (node !== null) {\n            setPopperElement(node);\n        }\n    }, []);\n    const el = portalRef.current;\n\n    el.id = id || `${DEFAULT_PORTAL_ID}-${randId.current}`;\n    // el.style.cssText = styleToCssText({ zIndex: 101, ...style });\n\n    if (className) {\n        el.className = className;\n    }\n\n    if (dataTestId) {\n        el.setAttribute('data-test-id', dataTestId);\n    }\n\n    useEffect(() => {\n        document.body.appendChild(el);\n\n        return (): void => {\n            document.body.removeChild(el);\n        };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    return createPortal(\n        <div\n            ref={popperRef}\n            style={{\n                zIndex: 101,\n                ...popper.styles.popper,\n                ...style,\n            }}\n            {...popper.attributes.popper}\n        >\n            <MagnifyContainer isPortalRendered {...rest} />\n        </div>,\n        el,\n    );\n});\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}