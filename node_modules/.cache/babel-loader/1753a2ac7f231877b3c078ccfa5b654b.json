{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Acer\\\\Desktop\\\\Work\\\\garaaz-distributor\\\\src\\\\containers\\\\Sales\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useMemo, useState, useRef, useEffect } from 'react';\nimport DynamicTable from '../../components/DynamicTable';\nimport { useIntl } from 'react-intl';\nimport { Box, Button, Link, Alert, AlertIcon, AlertDescription, Tabs, TabList, Tab, TabPanels, TabPanel, Badge } from '@chakra-ui/react';\nimport ModifiedTableTop from '../../components/TableTop/ModifiedTableTop';\nimport readXlsxFile from 'read-excel-file';\nimport { getAllSales, selectSales, getQueuedFiles } from './slice';\nimport { useSelector, useDispatch } from 'react-redux';\nimport moment from 'moment';\nimport { useRouteMatch, Switch, Route, Link as ReactLink, useHistory } from 'react-router-dom';\nimport WorkshopAcct from './WorkshopAccount';\nimport withToast from '../../HOCs/withToast';\nimport messages from './messages';\nimport getMoneyFormat from '../../utils/getMoneyFormat';\nimport SalesBulk from '../../components/SalesBulk/Loadable';\nimport enums from '../../utils/enums';\nimport SimpleModal from '../../components/Modal';\nimport { selectGlobalState } from '../../globalSlice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Sales = _ref => {\n  _s();\n\n  let {\n    notification\n  } = _ref;\n  const [inputValues, setInputValue] = useState({\n    end: moment().format('MM-YYYY'),\n    start: moment().format('MM-YYYY')\n  });\n  const intl = useIntl();\n  const [isLoading, setIsLoading] = useState(false);\n  const auth = useSelector(state => state.auth);\n  const {\n    allSales,\n    queuedFile\n  } = useSelector(selectSales);\n  const dispatcher = useDispatch();\n  const {\n    url,\n    path\n  } = useRouteMatch();\n  const [tableLoading, setTableLoading] = useState(false);\n  const [fileQueueLoading, setFileQueueLoading] = useState(false);\n  const [tableData, setTableData] = useState([]);\n  const history = useHistory();\n  const [openCommentModal, setOpenCommentModal] = useState({\n    isOpen: false,\n    comment: ''\n  });\n  const {\n    isDistributor\n  } = useSelector(selectGlobalState);\n  useEffect(() => {\n    (async () => {\n      setTableLoading(true);\n      await dispatcher(getAllSales({\n        auth,\n        params: {}\n      }));\n      setTableLoading(false);\n      setFileQueueLoading(true);\n      dispatcher(getQueuedFiles({\n        auth\n      }));\n      setFileQueueLoading(false);\n    })();\n  }, []);\n  useEffect(() => {\n    setTableData(allSales);\n  }, [allSales]);\n  const inputData = useMemo(() => [{\n    title: intl.formatMessage(messages.accountDetailSearch),\n    type: 'text',\n    placeholder: '',\n    name: 'searchAccount'\n  }, {\n    title: intl.formatMessage(messages.groupBy),\n    type: 'select',\n    placeholder: 'Select option',\n    name: 'groupBy',\n    options: [{\n      value: 'none',\n      label: 'None'\n    }, {\n      value: 'branch',\n      label: intl.formatMessage(messages.branch)\n    }, {\n      value: 'salesRep',\n      label: intl.formatMessage(messages.salesRep)\n    }, {\n      value: 'workshopType',\n      label: intl.formatMessage(messages.workshopType)\n    }]\n  }, {\n    title: intl.formatMessage(messages.date),\n    type: 'date',\n    placeholder: 'Enter order No',\n    name: ['start', 'end'],\n    defaultValue: [moment().startOf('month').format('YYYY-MM-DD'), moment().format('YYYY-MM-DD')]\n  }], []);\n  const queueFileColumn = useMemo(() => [{\n    Header: intl.formatMessage(messages.sNo),\n    accessor: 'sno',\n    Cell: allData => {\n      var _allData$row;\n\n      return /*#__PURE__*/_jsxDEV(Box, {\n        children: (allData === null || allData === void 0 ? void 0 : (_allData$row = allData.row) === null || _allData$row === void 0 ? void 0 : _allData$row.index) + 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 18\n      }, this);\n    }\n  }, {\n    Header: intl.formatMessage(messages.mediaId),\n    accessor: 'media',\n    Cell: _ref2 => {\n      var _value$path;\n\n      let {\n        value\n      } = _ref2;\n      return /*#__PURE__*/_jsxDEV(Link, {\n        href: (_value$path = value === null || value === void 0 ? void 0 : value.path) !== null && _value$path !== void 0 ? _value$path : '',\n        target: \"_blank\",\n        children: \"Download File\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 13\n      }, this);\n    }\n  }, {\n    Header: intl.formatMessage(messages.dateAndTime),\n    accessor: 'createdAt',\n    Cell: _ref3 => {\n      let {\n        value\n      } = _ref3;\n      return moment(value).format('DD/MM/YYYY h:mm:ss a');\n    }\n  }, {\n    Header: intl.formatMessage(messages.status),\n    accessor: 'status',\n    Cell: _ref4 => {\n      let {\n        value\n      } = _ref4;\n      return value === enums.PENDING ? /*#__PURE__*/_jsxDEV(Badge, {\n        colorScheme: \"yellow\",\n        children: intl.formatMessage(messages.pendingStatus)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 13\n      }, this) : value === enums.COMPLETED ? /*#__PURE__*/_jsxDEV(Badge, {\n        colorScheme: \"green\",\n        children: intl.formatMessage(messages.completedStatus)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(Badge, {\n        colorScheme: \"orange\",\n        children: value.replace(/_/g, ' ')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 13\n      }, this);\n    }\n  }, {\n    Header: 'comments',\n    accessor: 'comments',\n    Cell: _ref5 => {\n      let {\n        value\n      } = _ref5;\n      return /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => setOpenCommentModal({\n          isOpen: true,\n          comment: value !== null && value !== void 0 ? value : 'No Comment'\n        }),\n        variant: \"ghost\",\n        children: \"View Comment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 11\n      }, this);\n    }\n  }], []);\n  const columns = useMemo(() => [{\n    Header: intl.formatMessage(messages.sNo),\n    accessor: 'sno',\n    Cell: allData => {\n      var _allData$row2;\n\n      return /*#__PURE__*/_jsxDEV(Box, {\n        children: (allData === null || allData === void 0 ? void 0 : (_allData$row2 = allData.row) === null || _allData$row2 === void 0 ? void 0 : _allData$row2.index) + 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 18\n      }, this);\n    }\n  }, {\n    Header: intl.formatMessage(messages.workshopName),\n    accessor: 'workshopName'\n  }, {\n    Header: 'Workshop Code',\n    accessor: 'code'\n  }, {\n    Header: intl.formatMessage(messages.workshopType),\n    accessor: 'workshopType'\n  }, {\n    Header: intl.formatMessage(messages.branch),\n    accessor: 'branch'\n  }, {\n    Header: intl.formatMessage(messages.salesRep),\n    accessor: 'salesRep'\n  }, {\n    Header: intl.formatMessage(messages.retailQty),\n    accessor: 'retailQty'\n  }, {\n    Header: intl.formatMessage(messages.retailSell),\n    accessor: 'retailSell',\n    Cell: _ref6 => {\n      let {\n        value\n      } = _ref6;\n      return getMoneyFormat(value);\n    }\n  }, {\n    Header: intl.formatMessage(messages.returnQty),\n    accessor: 'returnQty'\n  }, {\n    Header: intl.formatMessage(messages.returnSell),\n    accessor: 'returnSell',\n    Cell: _ref7 => {\n      let {\n        value\n      } = _ref7;\n      return getMoneyFormat(value);\n    }\n  }], []);\n  const groupedByBranchColumn = useMemo(() => [{\n    Header: intl.formatMessage(messages.sNo),\n    accessor: 'sno',\n    Cell: allData => {\n      var _allData$row3;\n\n      return /*#__PURE__*/_jsxDEV(Box, {\n        children: (allData === null || allData === void 0 ? void 0 : (_allData$row3 = allData.row) === null || _allData$row3 === void 0 ? void 0 : _allData$row3.index) + 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 18\n      }, this);\n    }\n  }, {\n    Header: intl.formatMessage(messages.branchName),\n    accessor: 'branchName'\n  }, {\n    Header: intl.formatMessage(messages.totalCustomer),\n    accessor: 'customers',\n    Cell: _ref8 => {\n      let {\n        value\n      } = _ref8;\n      return /*#__PURE__*/_jsxDEV(Box, {\n        children: value === null || value === void 0 ? void 0 : value.length\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 18\n      }, this);\n    }\n  }, {\n    Header: intl.formatMessage(messages.retailQty),\n    accessor: 'retailQty'\n  }, {\n    Header: intl.formatMessage(messages.retailSell),\n    accessor: 'retailSell',\n    Cell: _ref9 => {\n      let {\n        value\n      } = _ref9;\n      return getMoneyFormat(value);\n    }\n  }, {\n    Header: intl.formatMessage(messages.returnQty),\n    accessor: 'returnQty'\n  }, {\n    Header: intl.formatMessage(messages.returnSell),\n    accessor: 'returnSell',\n    Cell: _ref10 => {\n      let {\n        value\n      } = _ref10;\n      return getMoneyFormat(value);\n    }\n  }], []);\n  const groupedBySalesColumn = useMemo(() => [{\n    Header: intl.formatMessage(messages.sNo),\n    accessor: 'sno',\n    Cell: allData => {\n      var _allData$row4;\n\n      return /*#__PURE__*/_jsxDEV(Box, {\n        children: (allData === null || allData === void 0 ? void 0 : (_allData$row4 = allData.row) === null || _allData$row4 === void 0 ? void 0 : _allData$row4.index) + 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 18\n      }, this);\n    }\n  }, {\n    Header: intl.formatMessage(messages.salesRep),\n    accessor: 'salesRep'\n  }, {\n    Header: intl.formatMessage(messages.totalCustomer),\n    accessor: 'customers',\n    Cell: _ref11 => {\n      let {\n        value\n      } = _ref11;\n      return /*#__PURE__*/_jsxDEV(Box, {\n        children: value === null || value === void 0 ? void 0 : value.length\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 18\n      }, this);\n    }\n  }, {\n    Header: intl.formatMessage(messages.retailQty),\n    accessor: 'retailQty'\n  }, {\n    Header: intl.formatMessage(messages.retailSell),\n    accessor: 'retailSell',\n    Cell: _ref12 => {\n      let {\n        value\n      } = _ref12;\n      return getMoneyFormat(value);\n    }\n  }, {\n    Header: intl.formatMessage(messages.returnQty),\n    accessor: 'returnQty'\n  }, {\n    Header: intl.formatMessage(messages.returnSell),\n    accessor: 'returnSell',\n    Cell: _ref13 => {\n      let {\n        value\n      } = _ref13;\n      return getMoneyFormat(value);\n    }\n  }], []);\n  const groupedByCustomerColumn = useMemo(() => [{\n    Header: intl.formatMessage(messages.sNo),\n    accessor: 'sno',\n    Cell: allData => {\n      var _allData$row5;\n\n      return /*#__PURE__*/_jsxDEV(Box, {\n        children: (allData === null || allData === void 0 ? void 0 : (_allData$row5 = allData.row) === null || _allData$row5 === void 0 ? void 0 : _allData$row5.index) + 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 18\n      }, this);\n    }\n  }, {\n    Header: intl.formatMessage(messages.workshopType),\n    accessor: 'workshopType'\n  }, {\n    Header: intl.formatMessage(messages.totalCustomer),\n    accessor: 'customers',\n    Cell: _ref14 => {\n      let {\n        value\n      } = _ref14;\n      return /*#__PURE__*/_jsxDEV(Box, {\n        children: value === null || value === void 0 ? void 0 : value.length\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 18\n      }, this);\n    }\n  }, {\n    Header: intl.formatMessage(messages.retailQty),\n    accessor: 'retailQty'\n  }, {\n    Header: intl.formatMessage(messages.retailSell),\n    accessor: 'retailSell',\n    Cell: _ref15 => {\n      let {\n        value\n      } = _ref15;\n      return getMoneyFormat(value);\n    }\n  }, {\n    Header: intl.formatMessage(messages.returnQty),\n    accessor: 'returnQty'\n  }, {\n    Header: intl.formatMessage(messages.returnSell),\n    accessor: 'returnSell',\n    Cell: _ref16 => {\n      let {\n        value\n      } = _ref16;\n      return getMoneyFormat(value);\n    }\n  }], []);\n\n  const handleTableTopChange = async (e, name) => {\n    setTableLoading(true);\n    let {\n      end,\n      start,\n      ...prevInputValues\n    } = { ...inputValues\n    };\n    let value = e.hasOwnProperty('target') ? `${e.target.value}`.trim() : `${e.value}`.trim();\n\n    if (name === 'searchAccount') {\n      setTableData([...allSales].filter(account => {\n        return `${account.code}`.toLowerCase().indexOf(value.toLowerCase()) !== -1 || `${account.workshopName}`.toLowerCase().indexOf(value.toLowerCase()) !== -1 || `${account.branchName}`.toLowerCase().indexOf(value.toLowerCase()) !== -1 || `${account.workshopType}`.toLowerCase().indexOf(value.toLowerCase()) !== -1 || `${account.salesRep}`.toLowerCase().indexOf(value.toLowerCase()) !== -1 || `${account.branch}`.toLowerCase().indexOf(value.toLowerCase()) !== -1;\n      }));\n      setTableLoading(false);\n      return;\n    }\n\n    if (name === 'start') {\n      start = moment(value).format('MM-YYYY');\n      value = `${start},${end}`;\n      name = 'month';\n      const newData = { ...inputValues,\n        start\n      };\n      setInputValue(newData);\n    } else if (name === 'end') {\n      end = moment(value).format('MM-YYYY');\n      value = `${start},${end}`;\n      name = 'month';\n      const newData = { ...inputValues,\n        end\n      };\n      setInputValue(newData);\n    } else {\n      setInputValue(prevState => ({ ...prevState,\n        [name]: typeof value !== 'object' && value !== 'none' ? value : value === 'none' ? '' : value.value\n      }));\n    }\n\n    try {\n      await dispatcher(getAllSales({\n        auth,\n        params: { ...prevInputValues,\n          [name]: typeof value !== 'object' && value !== 'none' ? value : value === 'none' ? '' : value.value\n        }\n      }));\n      setTableLoading(false);\n    } catch (error) {\n      setTableLoading(false);\n    }\n  };\n\n  const activeColumn = useMemo(() => {\n    return (inputValues === null || inputValues === void 0 ? void 0 : inputValues.groupBy) === 'branch' ? groupedByBranchColumn : (inputValues === null || inputValues === void 0 ? void 0 : inputValues.groupBy) === 'salesRep' ? groupedBySalesColumn : (inputValues === null || inputValues === void 0 ? void 0 : inputValues.groupBy) === 'workshopType' ? groupedByCustomerColumn : columns;\n  }, [inputValues === null || inputValues === void 0 ? void 0 : inputValues.groupBy]);\n  return /*#__PURE__*/_jsxDEV(Switch, {\n    children: [/*#__PURE__*/_jsxDEV(Route, {\n      exact: true,\n      path: path,\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        justifyContent: \"right\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          justifyContent: \"right\",\n          isLoading: isLoading,\n          variant: \"normal\",\n          onClick: () => history.push(`${url}/add-bulk-sales`),\n          children: \"+ Upload Sales\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        minHeight: \"80vh\",\n        mt: \"-65px\",\n        children: [isDistributor && /*#__PURE__*/_jsxDEV(Box, {\n          display: \"flex\",\n          justifyContent: \"flex-end\",\n          mb: 6,\n          width: \"100%\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Tabs, {\n          children: [/*#__PURE__*/_jsxDEV(TabList, {\n            children: [/*#__PURE__*/_jsxDEV(Tab, {\n              children: \"Sales\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 486,\n              columnNumber: 15\n            }, this), isDistributor && /*#__PURE__*/_jsxDEV(Tab, {\n              children: \"Uploaded Files\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 487,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TabPanels, {\n            children: [/*#__PURE__*/_jsxDEV(TabPanel, {\n              children: [/*#__PURE__*/_jsxDEV(ModifiedTableTop, {\n                inputData: inputData,\n                onChange: handleTableTopChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 492,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(DynamicTable, {\n                columns: activeColumn,\n                data: tableData,\n                fetchData: () => console.log('...fetching'),\n                skipPageReset: true,\n                loading: tableLoading\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 497,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n              children: /*#__PURE__*/_jsxDEV(DynamicTable, {\n                columns: queueFileColumn,\n                data: queuedFile,\n                fetchData: () => console.log('...fetching'),\n                skipPageReset: true,\n                loading: fileQueueLoading,\n                hidePagination: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 506,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SimpleModal, {\n        onClose: () => setOpenCommentModal({\n          isOpen: false,\n          comment: ''\n        }),\n        isOpen: openCommentModal.isOpen,\n        title: \"Comments on Uploaded file\",\n        hidefooter: true,\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          children: openCommentModal.comment\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 464,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      exact: true,\n      path: `${path}/add-bulk-sales`,\n      children: /*#__PURE__*/_jsxDEV(SalesBulk, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 527,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 463,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Sales, \"t0Z86wxURhyLnp7By2vYax5tSpE=\", false, function () {\n  return [useIntl, useSelector, useSelector, useDispatch, useRouteMatch, useHistory, useSelector];\n});\n\n_c = Sales;\nexport default _c2 = withToast(Sales);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Sales\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["C:/Users/Acer/Desktop/Work/garaaz-distributor/src/containers/Sales/index.js"],"names":["React","useMemo","useState","useRef","useEffect","DynamicTable","useIntl","Box","Button","Link","Alert","AlertIcon","AlertDescription","Tabs","TabList","Tab","TabPanels","TabPanel","Badge","ModifiedTableTop","readXlsxFile","getAllSales","selectSales","getQueuedFiles","useSelector","useDispatch","moment","useRouteMatch","Switch","Route","ReactLink","useHistory","WorkshopAcct","withToast","messages","getMoneyFormat","SalesBulk","enums","SimpleModal","selectGlobalState","Sales","notification","inputValues","setInputValue","end","format","start","intl","isLoading","setIsLoading","auth","state","allSales","queuedFile","dispatcher","url","path","tableLoading","setTableLoading","fileQueueLoading","setFileQueueLoading","tableData","setTableData","history","openCommentModal","setOpenCommentModal","isOpen","comment","isDistributor","params","inputData","title","formatMessage","accountDetailSearch","type","placeholder","name","groupBy","options","value","label","branch","salesRep","workshopType","date","defaultValue","startOf","queueFileColumn","Header","sNo","accessor","Cell","allData","row","index","mediaId","dateAndTime","status","PENDING","pendingStatus","COMPLETED","completedStatus","replace","columns","workshopName","retailQty","retailSell","returnQty","returnSell","groupedByBranchColumn","branchName","totalCustomer","length","groupedBySalesColumn","groupedByCustomerColumn","handleTableTopChange","e","prevInputValues","hasOwnProperty","target","trim","filter","account","code","toLowerCase","indexOf","newData","prevState","error","activeColumn","push","console","log"],"mappings":"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","sourcesContent":["import React, { useMemo, useState, useRef, useEffect } from 'react';\r\nimport DynamicTable from '../../components/DynamicTable';\r\nimport { useIntl } from 'react-intl';\r\nimport {\r\n  Box,\r\n  Button,\r\n  Link,\r\n  Alert,\r\n  AlertIcon,\r\n  AlertDescription,\r\n  Tabs,\r\n  TabList,\r\n  Tab,\r\n  TabPanels,\r\n  TabPanel,\r\n  Badge,\r\n} from '@chakra-ui/react';\r\nimport ModifiedTableTop from '../../components/TableTop/ModifiedTableTop';\r\nimport readXlsxFile from 'read-excel-file';\r\nimport { getAllSales, selectSales, getQueuedFiles } from './slice';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport moment from 'moment';\r\nimport {\r\n  useRouteMatch,\r\n  Switch,\r\n  Route,\r\n  Link as ReactLink,\r\n  useHistory,\r\n} from 'react-router-dom';\r\nimport WorkshopAcct from './WorkshopAccount';\r\nimport withToast from '../../HOCs/withToast';\r\nimport messages from './messages';\r\nimport getMoneyFormat from '../../utils/getMoneyFormat';\r\nimport SalesBulk from '../../components/SalesBulk/Loadable';\r\nimport enums from '../../utils/enums';\r\nimport SimpleModal from '../../components/Modal';\r\nimport { selectGlobalState } from '../../globalSlice';\r\n\r\nconst Sales = ({ notification }) => {\r\n  const [inputValues, setInputValue] = useState({\r\n    end: moment().format('MM-YYYY'),\r\n    start: moment().format('MM-YYYY'),\r\n  });\r\n  const intl = useIntl();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const auth = useSelector((state) => state.auth);\r\n  const { allSales, queuedFile } = useSelector(selectSales);\r\n\r\n  const dispatcher = useDispatch();\r\n  const { url, path } = useRouteMatch();\r\n  const [tableLoading, setTableLoading] = useState(false);\r\n  const [fileQueueLoading, setFileQueueLoading] = useState(false);\r\n  const [tableData, setTableData] = useState([]);\r\n  const history = useHistory();\r\n  const [openCommentModal, setOpenCommentModal] = useState({\r\n    isOpen: false,\r\n    comment: '',\r\n  });\r\n  const { isDistributor } = useSelector(selectGlobalState);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      setTableLoading(true);\r\n      await dispatcher(getAllSales({ auth, params: {} }));\r\n      setTableLoading(false);\r\n      setFileQueueLoading(true);\r\n      dispatcher(getQueuedFiles({ auth }));\r\n      setFileQueueLoading(false);\r\n    })();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setTableData(allSales);\r\n  }, [allSales]);\r\n\r\n  const inputData = useMemo(\r\n    () => [\r\n      {\r\n        title: intl.formatMessage(messages.accountDetailSearch),\r\n        type: 'text',\r\n        placeholder: '',\r\n        name: 'searchAccount',\r\n      },\r\n      {\r\n        title: intl.formatMessage(messages.groupBy),\r\n        type: 'select',\r\n        placeholder: 'Select option',\r\n        name: 'groupBy',\r\n        options: [\r\n          {\r\n            value: 'none',\r\n            label: 'None',\r\n          },\r\n          {\r\n            value: 'branch',\r\n            label: intl.formatMessage(messages.branch),\r\n          },\r\n          {\r\n            value: 'salesRep',\r\n            label: intl.formatMessage(messages.salesRep),\r\n          },\r\n          {\r\n            value: 'workshopType',\r\n            label: intl.formatMessage(messages.workshopType),\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        title: intl.formatMessage(messages.date),\r\n        type: 'date',\r\n        placeholder: 'Enter order No',\r\n        name: ['start', 'end'],\r\n        defaultValue: [\r\n          moment().startOf('month').format('YYYY-MM-DD'),\r\n          moment().format('YYYY-MM-DD'),\r\n        ],\r\n      },\r\n    ],\r\n    [],\r\n  );\r\n\r\n  const queueFileColumn = useMemo(\r\n    () => [\r\n      {\r\n        Header: intl.formatMessage(messages.sNo),\r\n        accessor: 'sno',\r\n        Cell: (allData) => {\r\n          return <Box>{allData?.row?.index + 1}</Box>;\r\n        },\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.mediaId),\r\n        accessor: 'media',\r\n        Cell: ({ value }) => {\r\n          return (\r\n            <Link href={value?.path ?? ''} target='_blank'>\r\n              Download File\r\n            </Link>\r\n          );\r\n        },\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.dateAndTime),\r\n        accessor: 'createdAt',\r\n        Cell: ({ value }) => moment(value).format('DD/MM/YYYY h:mm:ss a'),\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.status),\r\n        accessor: 'status',\r\n        Cell: ({ value }) => {\r\n          return value === enums.PENDING ? (\r\n            <Badge colorScheme='yellow'>\r\n              {intl.formatMessage(messages.pendingStatus)}\r\n            </Badge>\r\n          ) : value === enums.COMPLETED ? (\r\n            <Badge colorScheme='green'>\r\n              {intl.formatMessage(messages.completedStatus)}\r\n            </Badge>\r\n          ) : (\r\n            <Badge colorScheme='orange'>{value.replace(/_/g, ' ')}</Badge>\r\n          );\r\n        },\r\n      },\r\n      {\r\n        Header: 'comments',\r\n        accessor: 'comments',\r\n        Cell: ({ value }) => (\r\n          <Button\r\n            onClick={() =>\r\n              setOpenCommentModal({\r\n                isOpen: true,\r\n                comment: value ?? 'No Comment',\r\n              })\r\n            }\r\n            variant='ghost'\r\n          >\r\n            View Comment\r\n          </Button>\r\n        ),\r\n      },\r\n    ],\r\n    [],\r\n  );\r\n\r\n  const columns = useMemo(\r\n    () => [\r\n      {\r\n        Header: intl.formatMessage(messages.sNo),\r\n        accessor: 'sno',\r\n        Cell: (allData) => {\r\n          return <Box>{allData?.row?.index + 1}</Box>;\r\n        },\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.workshopName),\r\n        accessor: 'workshopName',\r\n      },\r\n      {\r\n        Header: 'Workshop Code',\r\n        accessor: 'code',\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.workshopType),\r\n        accessor: 'workshopType',\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.branch),\r\n        accessor: 'branch',\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.salesRep),\r\n        accessor: 'salesRep',\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.retailQty),\r\n        accessor: 'retailQty',\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.retailSell),\r\n        accessor: 'retailSell',\r\n        Cell: ({ value }) => getMoneyFormat(value),\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.returnQty),\r\n        accessor: 'returnQty',\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.returnSell),\r\n        accessor: 'returnSell',\r\n        Cell: ({ value }) => getMoneyFormat(value),\r\n      },\r\n    ],\r\n    [],\r\n  );\r\n\r\n  const groupedByBranchColumn = useMemo(\r\n    () => [\r\n      {\r\n        Header: intl.formatMessage(messages.sNo),\r\n        accessor: 'sno',\r\n        Cell: (allData) => {\r\n          return <Box>{allData?.row?.index + 1}</Box>;\r\n        },\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.branchName),\r\n        accessor: 'branchName',\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.totalCustomer),\r\n        accessor: 'customers',\r\n        Cell: ({ value }) => {\r\n          return <Box>{value?.length}</Box>;\r\n        },\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.retailQty),\r\n        accessor: 'retailQty',\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.retailSell),\r\n        accessor: 'retailSell',\r\n        Cell: ({ value }) => getMoneyFormat(value),\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.returnQty),\r\n        accessor: 'returnQty',\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.returnSell),\r\n        accessor: 'returnSell',\r\n        Cell: ({ value }) => getMoneyFormat(value),\r\n      },\r\n    ],\r\n    [],\r\n  );\r\n\r\n  const groupedBySalesColumn = useMemo(\r\n    () => [\r\n      {\r\n        Header: intl.formatMessage(messages.sNo),\r\n        accessor: 'sno',\r\n        Cell: (allData) => {\r\n          return <Box>{allData?.row?.index + 1}</Box>;\r\n        },\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.salesRep),\r\n        accessor: 'salesRep',\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.totalCustomer),\r\n        accessor: 'customers',\r\n        Cell: ({ value }) => {\r\n          return <Box>{value?.length}</Box>;\r\n        },\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.retailQty),\r\n        accessor: 'retailQty',\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.retailSell),\r\n        accessor: 'retailSell',\r\n        Cell: ({ value }) => getMoneyFormat(value),\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.returnQty),\r\n        accessor: 'returnQty',\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.returnSell),\r\n        accessor: 'returnSell',\r\n        Cell: ({ value }) => getMoneyFormat(value),\r\n      },\r\n    ],\r\n    [],\r\n  );\r\n  const groupedByCustomerColumn = useMemo(\r\n    () => [\r\n      {\r\n        Header: intl.formatMessage(messages.sNo),\r\n        accessor: 'sno',\r\n        Cell: (allData) => {\r\n          return <Box>{allData?.row?.index + 1}</Box>;\r\n        },\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.workshopType),\r\n        accessor: 'workshopType',\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.totalCustomer),\r\n        accessor: 'customers',\r\n        Cell: ({ value }) => {\r\n          return <Box>{value?.length}</Box>;\r\n        },\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.retailQty),\r\n        accessor: 'retailQty',\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.retailSell),\r\n        accessor: 'retailSell',\r\n        Cell: ({ value }) => getMoneyFormat(value),\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.returnQty),\r\n        accessor: 'returnQty',\r\n      },\r\n      {\r\n        Header: intl.formatMessage(messages.returnSell),\r\n        accessor: 'returnSell',\r\n        Cell: ({ value }) => getMoneyFormat(value),\r\n      },\r\n    ],\r\n    [],\r\n  );\r\n\r\n  const handleTableTopChange = async (e, name) => {\r\n    setTableLoading(true);\r\n    let { end, start, ...prevInputValues } = { ...inputValues };\r\n\r\n    let value = e.hasOwnProperty('target')\r\n      ? `${e.target.value}`.trim()\r\n      : `${e.value}`.trim();\r\n\r\n    if (name === 'searchAccount') {\r\n      setTableData(\r\n        [...allSales].filter((account) => {\r\n          return (\r\n            `${account.code}`.toLowerCase().indexOf(value.toLowerCase()) !==\r\n              -1 ||\r\n            `${account.workshopName}`\r\n              .toLowerCase()\r\n              .indexOf(value.toLowerCase()) !== -1 ||\r\n            `${account.branchName}`\r\n              .toLowerCase()\r\n              .indexOf(value.toLowerCase()) !== -1 ||\r\n            `${account.workshopType}`\r\n              .toLowerCase()\r\n              .indexOf(value.toLowerCase()) !== -1 ||\r\n            `${account.salesRep}`.toLowerCase().indexOf(value.toLowerCase()) !==\r\n              -1 ||\r\n            `${account.branch}`.toLowerCase().indexOf(value.toLowerCase()) !==\r\n              -1\r\n          );\r\n        }),\r\n      );\r\n\r\n      setTableLoading(false);\r\n      return;\r\n    }\r\n\r\n    if (name === 'start') {\r\n      start = moment(value).format('MM-YYYY');\r\n\r\n      value = `${start},${end}`;\r\n      name = 'month';\r\n\r\n      const newData = {\r\n        ...inputValues,\r\n        start,\r\n      };\r\n      setInputValue(newData);\r\n    } else if (name === 'end') {\r\n      end = moment(value).format('MM-YYYY');\r\n      value = `${start},${end}`;\r\n      name = 'month';\r\n\r\n      const newData = {\r\n        ...inputValues,\r\n        end,\r\n      };\r\n\r\n      setInputValue(newData);\r\n    } else {\r\n      setInputValue((prevState) => ({\r\n        ...prevState,\r\n        [name]:\r\n          typeof value !== 'object' && value !== 'none'\r\n            ? value\r\n            : value === 'none'\r\n            ? ''\r\n            : value.value,\r\n      }));\r\n    }\r\n\r\n    try {\r\n      await dispatcher(\r\n        getAllSales({\r\n          auth,\r\n          params: {\r\n            ...prevInputValues,\r\n            [name]:\r\n              typeof value !== 'object' && value !== 'none'\r\n                ? value\r\n                : value === 'none'\r\n                ? ''\r\n                : value.value,\r\n          },\r\n        }),\r\n      );\r\n\r\n      setTableLoading(false);\r\n    } catch (error) {\r\n      setTableLoading(false);\r\n    }\r\n  };\r\n\r\n  const activeColumn = useMemo(() => {\r\n    return inputValues?.groupBy === 'branch'\r\n      ? groupedByBranchColumn\r\n      : inputValues?.groupBy === 'salesRep'\r\n      ? groupedBySalesColumn\r\n      : inputValues?.groupBy === 'workshopType'\r\n      ? groupedByCustomerColumn\r\n      : columns;\r\n  }, [inputValues?.groupBy]);\r\n\r\n  return (\r\n    <Switch>\r\n      <Route exact path={path}>\r\n        <Box\r\n         justifyContent='right'\r\n                  >\r\n                <Button\r\n                justifyContent='right'\r\n                isLoading={isLoading}\r\n                variant='normal'\r\n                onClick={() => history.push(`${url}/add-bulk-sales`)}\r\n              >\r\n                + Upload Sales\r\n              </Button>\r\n              </Box>\r\n\r\n        <Box minHeight='80vh' mt='-65px'>\r\n          {isDistributor && (\r\n            <Box display='flex' justifyContent='flex-end' mb={6} width='100%'>\r\n             \r\n            </Box>\r\n          )}\r\n          <Tabs>\r\n            <TabList>\r\n              <Tab>Sales</Tab>\r\n              {isDistributor && <Tab>Uploaded Files</Tab>}\r\n            </TabList>\r\n\r\n            <TabPanels>\r\n              <TabPanel>\r\n                <ModifiedTableTop\r\n                  inputData={inputData}\r\n                  onChange={handleTableTopChange}\r\n                />\r\n\r\n                <DynamicTable\r\n                  columns={activeColumn}\r\n                  data={tableData}\r\n                  fetchData={() => console.log('...fetching')}\r\n                  skipPageReset={true}\r\n                  loading={tableLoading}\r\n                />\r\n              </TabPanel>\r\n              <TabPanel>\r\n                <DynamicTable\r\n                  columns={queueFileColumn}\r\n                  data={queuedFile}\r\n                  fetchData={() => console.log('...fetching')}\r\n                  skipPageReset={true}\r\n                  loading={fileQueueLoading}\r\n                  hidePagination\r\n                />\r\n              </TabPanel>\r\n            </TabPanels>\r\n          </Tabs>\r\n        </Box>\r\n        <SimpleModal\r\n          onClose={() => setOpenCommentModal({ isOpen: false, comment: '' })}\r\n          isOpen={openCommentModal.isOpen}\r\n          title='Comments on Uploaded file'\r\n          hidefooter\r\n        >\r\n          <Box>{openCommentModal.comment}</Box>\r\n        </SimpleModal>\r\n      </Route>\r\n      <Route exact path={`${path}/add-bulk-sales`}>\r\n        <SalesBulk />\r\n      </Route>\r\n    </Switch>\r\n  );\r\n};\r\n\r\nexport default withToast(Sales);\r\n"]},"metadata":{},"sourceType":"module"}